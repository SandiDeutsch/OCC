<html>
 <head>
  <meta charset="utf-8"/>
  <meta content="System Administrator Guide for CCSP 7.3 and 7.4" name="description"/>
  <title>
   CCSP System Administrator Guide - 7.3 and 7.4
  </title>
 </head>
 <body>
  <article>
   <section>
    <p>
     Contact Center:  
Service Provider 
System Administrator Guide 
Version 7.3 and 7.4
    </p>
    <p>
     CCSP-SAG-73/74-R6-09/2024 
Contents 
1: Intro .............................................................................................................................................7 
What’s new ................................................................................................................................................. 7 
Definitions .................................................................................................................................................. 7 
Legal disclaimer ......................................................................................................................................... 9 
Support ....................................................................................................................................................... 9 
2: CCSP overview ......................................................................................................................... 10 
Components ............................................................................................................................................. 10 
Automatic Call Distribution (ACD) Server .................................................................................... 10 
Administrator Interaction Server (Admin IS) .............................................................................. 10 
Agent Interaction Server (AIS) ...................................................................................................... 11 
CCSP Admin ..................................................................................................................................... 11 
Clients ............................................................................................................................................... 11 
CCSP Caller ....................................................................................................................................... 12 
Device Proxy Server (DPS) ............................................................................................................. 12 
Internet Chat Server (ICS).............................................................................................................. 12 
Message Connection Server (MCS) .............................................................................................. 12 
Messaging Server (MS) .................................................................................................................. 12 
Predictive Dialing Server (PDS) ..................................................................................................... 12 
Replay ............................................................................................................................................... 13 
Voicemail Server (VMS) .................................................................................................................. 13 
VoIP Connection Server (VCS) ....................................................................................................... 13 
Interaction recording .............................................................................................................................. 13 
Interaction recording components .............................................................................................. 14 
Contact center performance report tools............................................................................................ 15 
Tenant statistical views .................................................................................................................. 15 
How CCSP works ...................................................................................................................................... 16 
Logical connections ................................................................................................................................. 17 
Always On availability groups ................................................................................................................ 18 
Historical Reports............................................................................................................................ 18 
Remote site survivability ........................................................................................................................ 19 
IP telephony ............................................................................................................................................. 19 
Personal voicemail .......................................................................................................................... 19 
Interactive Voice and Video Response (IVVR) ..................................................................................... 20 
Speech-enabled contact centers ........................................................................................................... 21 
Teams integration ................................................................................................................................... 22 
Messaging modes ................................................................................................................................... 23 
Multi-tenancy concepts .......................................................................................................................... 25 
System administrator roles in a multi-tenant contact center .................................................. 25
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
3 
Tenant roles in a multi-tenant contact center ............................................................................ 25 
Administrative hierarchy for multi-tenancy ................................................................................ 25 
System Administrator supported data................................................................................ 26 
Tenant Administrator supported data ................................................................................ 26 
Privacy protection .................................................................................................................................... 27 
Regulating information exposed to called parties .................................................................... 27 
Tenant uses SIP privacy information in scripts .......................................................................... 27 
System administrator tasks ................................................................................................................... 27 
Setting up the CCSP platform ....................................................................................................... 27 
Add a new tenant ............................................................................................................................ 28 
System operation and administration ......................................................................................... 28 
3: Additional tenant configuration ............................................................................................ 29 
Change the secret key ............................................................................................................................ 29 
Use Exchange as an external mailbox.................................................................................................. 30 
Help tenants use Designer ..................................................................................................................... 31 
Verify that the XML Interpreter is available ................................................................................ 31 
Use WebDAV to save scripts via HTTP ......................................................................................... 32 
Configure SRTP for a tenant .................................................................................................................. 34 
Configure tenant time zones ................................................................................................................. 36 
Script-based answer supervision .......................................................................................................... 38 
PBX-style answering ....................................................................................................................... 38 
Enable Web chat in a multitenant environment ................................................................................. 39 
Caller language ID .......................................................................................................................... 39 
Enable interaction recording for a tenant ........................................................................................... 39 
Resolve Dashboard cross-domain authentication issues ................................................................. 40 
Connect Provisioning Portal (PRP) to CCSP Admin ............................................................................ 40 
Remove user profile folders .................................................................................................................. 41 
Reduce agent logon time ....................................................................................................................... 41 
Change DNS records from the command line .................................................................................... 42 
Install G.729 codecs ................................................................................................................................. 43 
4: Configure CCSP Admin ........................................................................................................... 44 
Customize the CCSP Admin look and feel ............................................................................................ 44 
Customize the CCSP Admin navigation ................................................................................................ 45 
Customize the CCSP Admin grid definition ......................................................................................... 45 
Customize the CCSP Admin screen definition ..................................................................................... 46 
Preserve customer overrides................................................................................................................. 48 
5: Configure CCSP UI ................................................................................................................... 49 
Configure the CCSP UI Updater ............................................................................................................ 49 
Disable editing of the default template and system gadgets .......................................................... 50
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
4 
Configure MS folder change notifications ........................................................................................... 51 
Configure the chat box alignment ........................................................................................................ 52 
Enable multiple interaction mode for callbacks ................................................................................. 52 
Set the inactivity timer ............................................................................................................................ 53 
Change the email draft auto-save rate ................................................................................................ 53 
Enable start in toolbar mode ................................................................................................................. 53 
Configure the wallboard ........................................................................................................................ 54 
Connect to external Web or desktop applications ............................................................................. 54 
6: Configure Dashboard ............................................................................................................. 55 
Configure the Dashboard service ......................................................................................................... 55 
Configure the Dashboard application .................................................................................................. 57 
Configure the Dashboard application language ................................................................................ 58 
7: Configure Replay ..................................................................................................................... 59 
Create the recordings download virtual directory ............................................................................. 59 
Configure the recordings download folder ......................................................................................... 60 
Control access to recordings virtual directory .................................................................................... 60 
Enable audio visualization ...................................................................................................................... 61 
Streamed file names ............................................................................................................................... 62 
Archiver Playback .................................................................................................................................... 62 
Configuration modes ..................................................................................................................... 62 
Configure Replay for Online mode .............................................................................................. 63 
Configure Replay for Offline mode .............................................................................................. 63 
Auth Server configuration ..................................................................................................... 63 
Replay Server configuration ................................................................................................. 64 
Configure Replay for On-premise mode ..................................................................................... 65 
Auth Server configuration ..................................................................................................... 65 
Replay Server configuration ................................................................................................. 65 
8: Configure IP phones ............................................................................................................... 66 
Create an FTP folder for each tenant ................................................................................................... 66 
Create and assigning tenant extensions ............................................................................................. 66 
Individual IP phone configuration files ................................................................................................ 66 
9: Configure languages .............................................................................................................. 67 
Configure the back end language ........................................................................................................ 67 
Chat Proxy Service .......................................................................................................................... 67 
ChatExtension.dll ............................................................................................................................ 67 
Dashboard (legacy) ........................................................................................................................ 68 
Dashboard Service .......................................................................................................................... 68 
SQL Server ........................................................................................................................................ 68
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
5 
Enable different Web chat languages for tenants ............................................................................. 69 
Configure the callback dialog language .............................................................................................. 69 
10: Configure the VCS ................................................................................................................. 70 
Features and capabilities ....................................................................................................................... 70 
Gatekeeper registration................................................................................................................. 70 
Inbound/outbound dialing............................................................................................................ 70 
IVR capabilities and limitations ..................................................................................................... 71 
Monitoring capabilities .................................................................................................................. 71 
Codecs .............................................................................................................................................. 71 
Multiple VCSs ................................................................................................................................... 71 
Load balancing ................................................................................................................................ 71 
Multiple gateway service policy .................................................................................................... 72 
System administration and configuration .................................................................................. 72 
Components .................................................................................................................................... 72 
Signaling features ................................................................................................................................... 72 
Gatekeeper discovery ..................................................................................................................... 72 
Registration ..................................................................................................................................... 72 
Keep Alive interval .......................................................................................................................... 73 
Terminate connection .................................................................................................................... 73 
H.225 call setup ............................................................................................................................... 73 
H.245 control channel .................................................................................................................... 73 
IVR handling .................................................................................................................................... 73 
SIP signaling .................................................................................................................................... 73 
Set the RTP frame packet size ............................................................................................................... 74 
Debug the VCS ......................................................................................................................................... 75 
Limiting the log file size ................................................................................................................. 75 
Configure VCS load balancing ............................................................................................................... 76 
Configure the VCS for Teams ................................................................................................................. 76 
Stack configuration ................................................................................................................................. 77 
System parameters......................................................................................................................... 78 
Syntax ....................................................................................................................................... 78 
Parameters .............................................................................................................................. 78 
H.245 parameters ........................................................................................................................... 80 
Syntax ....................................................................................................................................... 80 
Parameters .............................................................................................................................. 81 
Q.931 parameters ........................................................................................................................... 82 
Syntax ....................................................................................................................................... 83 
Parameters .............................................................................................................................. 83 
RAS parameters............................................................................................................................... 84 
Syntax ....................................................................................................................................... 85 
Parameters .............................................................................................................................. 85
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
6 
11: Configure dialing plans ........................................................................................................ 88 
Configure the VCS ................................................................................................................................... 88 
Enable agent relative number translations ......................................................................................... 89 
Enable routing code remapping ........................................................................................................... 89 
Test the dialing plan ................................................................................................................................ 90 
Customize dialing plans ......................................................................................................................... 91 
CheckPrivileges input parameters ............................................................................................... 91 
CreateCSList input parameters ..................................................................................................... 92 
12: Configure SNMP traps .......................................................................................................... 93 
Implement traps ...................................................................................................................................... 93 
Configure traps ........................................................................................................................................ 94 
13: Configure the ECS ................................................................................................................. 95 
Configure ECS services ........................................................................................................................... 95 
Restart ECS services ................................................................................................................................ 96 
Configure tenant mappings ................................................................................................................... 97 
Command line reference ............................................................................................................... 98 
Administration mode command line ................................................................................ 105 
ECS upgrade process ............................................................................................................................ 108 
14: Configure the TWS .............................................................................................................. 109
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
7 
1: Intro 
This document is for CCSP landlord administrators who configure and manage the CCSP platform, 
and reseller administrators who manage only the tenant properties and tenant resources of their 
assigned tenants. 
What’s new 
Version 7.4 
• 
6: Configure Dashboard: 
o 
Configure the Dashboard service — added parameter FromEmailAddress. 
o 
Configure the Dashboard application — added parameter defaultLanguage. 
o 
Configure the Dashboard application language — added instructions. 
• 
13: Configure the ECS — updated for Elsbeth 9.x. 
• 
Removed CCSP Admin information from this guide. Instead, please refer to the CCSP Admin 
Help - Landlord online help or PDF.  
Definitions 
Term 
Definition 
agent 
A contact center representative, typically a customer service representative, 
collection agent, or a remote help desk support person. 
ASR 
Automated Speech Recognition — automatic conversion of spoken words to 
text. 
Call 
parameter 
A call is associated with these parameters: TqoS, skills required, queue 
destination, caller name, URL, and any number of optional parameters. 
Contact 
center 
Generally, reservation centers, help desks, collection agencies, customer service 
centers, and the like. 
Group 
A collection of agents working in the same area of expertise (skill set) in the 
contact center. The agents in a group receive calls from the same queues. 
KCO 
Keep Connection Open — enables agent to remain connected to CCSP through 
an alternative device for the duration of their shift. 
MSR 
Message Storage Repository
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
8 
Term 
Definition 
MSR DB 
General term for referencing database type that stores data for emails, 
callbacks, and voicemail. 
• 
Active MSR DB — database type that stores data for new and ongoing 
emails, callbacks, and voicemails. Also called the Tenant Messaging 
Database. 
• 
Archive MSR DB — database type that stores data for handled, rejected, or 
deleted emails, callbacks, and voicemails. Also called the Tenant Messaging 
Archive Database. 
Priority 
Independent of TqoS, you can assign priorities to calls arriving at your contact 
center through scripts. The priorities are in the range from 0 through 99, with 
the default being 49, the lowest priority 0, and the highest priority 99. Within a 
queue, call priority overrides TqoS and call maturity. 
Queue 
A mechanism to manage a collection of incoming calls (telephone, email, 
Internet, video) that require common handling. 
Release code 
Codes used by agents to explain why they are making themselves unavailable to 
accept calls. 
Routing 
The movement of a call from the ACD to a queue and then to an agent with the 
skills to handle the call. 
Script 
A small program written for a command interpreter. Scripts are used to respond 
to  pre-defined events that may be triggered in CCSP. 
Skill 
A skill is an attribute of an individual agent, who is defined by the administrator 
in the agent administration procedure. Skills (skill requirements) are also 
attributes of individual calls, which may be assigned to the call in the 
construction of the call request by the web or IVR application. 
Team 
An administrative grouping of agents. Teams do not affect how calls are routed 
to agents. 
Timeout 
If a call remains unanswered for longer than this time period, an event is 
triggered. 
TqoS 
Total Quality of Service — the amount of time (in seconds) in which a call should 
be answered and can be used to specify service levels for types of customers. 
TTS 
Text to Speech — the synthesis of a spoken sound version of a text. 
Wrap up code 
Code that represents the result of a call.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
9 
Legal disclaimer 
This document is governed by the terms of the software license agreement and applicable contract 
(including addendums) entered into with Enghouse. 
Support 
To submit comments or questions about the content in this document, please open a case with 
Enghouse Support.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
10 
2: CCSP overview 
CCSP is a carrier-class contact center system, specifically designed for service providers and large 
scale enterprise users, that supports multimedia customer interactions using all media channels — 
telephone and internet, live and message-based, fixed and wireless — in one high-capacity, high-
availability, multi-tenant system. 
Instead of a legacy, circuit-switched Automatic Call Distributor (ACD), CCSP uses industry standard 
computing elements and current software development techniques to create a completely IP-based 
contact center. The all-IP environment is a unifying force for all media and all channels, replacing 
traditional Computer-Telephone Integration (CTI) with Computer-Computer Integration (CCI). 
CCSP addresses the needs of Application Service Providers (ASPs) offering hosted contact center 
services, as well individual enterprises having their own contact centers. This capability allows the 
system owner or operator, or an enterprise IT services department, to provide hosted contact 
center services to the tenants. This service is called a virtual contact center because the tenant has 
access to all contact center resources required to provision, administer and operate a live contact 
center in the same manner as if they owned the contact center infrastructure. The overall system 
provisioning and administration is distributed between the system administrator and their tenants. 
Each has a defined role in the operation of the CCSP system. 
Components 
The CCSP system comprises the following major components. 
Automatic Call Distribution (ACD) Server 
The Automatic Call Distribution (ACD) Server routes incoming calls to agents. The ACD Server has 
subcomponents of its own, these being: 
• 
Configuration Manager (CFM) — retains data regarding clients (tenants), users, agent 
groups, queues, skills, teams, events, scripts and connection servers. All system and tenant 
data is controlled by the Configuration Manager, and resides in a single database, the 
configuration database. This includes the former IPC addressing server. 
• 
Call Management Server (CMS) — call distribution engine. Matches calls to appropriate 
agents, based upon information received from the Configuration Manager. 
• 
Logging Server — logs data for historical reporting. Each client (tenant) has its own database 
in the logging server. 
• 
Statistics Server — logs data for real-time reporting. 
Administrator Interaction Server (Admin IS) 
Administrator Interaction Server (Admin IS) is the CCSP component that provides TCP/IP-based 
communication with Administrator applications over IP sockets.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
11 
Agent Interaction Server (AIS) 
Agent Interaction Server (AIS) is the CCSP component that provides TCP/IP-based communication 
with CCSP UI over IP sockets. This component manages all the interactions between the CCSP UI 
applications and the rest of the system. 
CCSP Admin 
CCSP Admin queries and manipulates the configuration database. The component consist of a 
backend API and a client-side application hosted in the IIS. 
Clients 
The CCSP system services a number of types of clients: 
• 
CCSP UI — used by users working with a browser 
• 
IP Phone — used as standalone device, or in conjunction with one of the agent applications for 
synchronous call control and computer- telephone integration (CTI) capabilities. Call control 
can be accomplished through both telephone keys and, optionally, CCSP UI. 
• 
Phone Agent — used by agents working through any telephone, without CCSP UI. Call control 
is through telephone keys for Answer and Hang-up, and through Interactive Voice Response 
(IVR), for example, for logon/off and availability. 
 
CCSP UI is an application in the user's browser that enables the user to accept incoming calls and 
originate outgoing calls. No separate telephone of any kind is required. 
A CCSP UI client can work in hybrid mode with any external voice devices, such as POTS telephones 
or IP phones connected to a PBX or the PSTN. 
An agent application client can also use an IP phone as a peripheral device for voice delivery and 
call control. In this configuration, CCSP provides the full management of the IP phone without the 
need for a third party PBX. 
CCSP UI can support video calling in hybrid mode with an IP phone that supports video or a 
softphone program in the user's computer. 
Caution 
The IP phone or softphone must support SIP. 
 
The CCSP applications service three types of users: 
• 
Business user — standard office workers 
• 
ReadyRep — knowledge workers and others who sometimes receive ACD-routed calls 
• 
Phone Agent — contact center customer service representatives who spend the majority of 
their day handling ACD-routed customer contacts 
 
The Business User license provides basic unified communication functions. It can only be reached 
by direct dial or direct transfer. The business user cannot be a destination of the Automatic Call 
Distribution (ACD) function of the CCSP system or participate in outbound dialing campaigns.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
12 
Agent and ReadyRep can be used as ACD destinations. Agent licenses are for traditional, formal 
contact center agents. ReadyRep licenses are designed for use by people who are not solely or even 
primarily dedicated to a formal contact center, but who need to be part of the contact center 
infrastructure in most other ways. They are sometimes known as informal agents or experts, and 
their ACD use is part-time. Supervisors can monitor and remotely manage agents, but not 
ReadyReps. 
The telephones, wireless devices, and the computers illustrated in the CCSP logical connections 
support the users and the callers. See also 5: Configure CCSP UI. 
CCSP Caller 
CCSP Caller enables any web-browsing user to call a CCSP-enabled contact center without any 
software download or installation. 
Device Proxy Server (DPS) 
The Device Proxy Server (DPS) is the CCSP component that provides communication with IP phones 
and manages all the interactions between IP phones and the rest of the system. DPS enables 
customers to use their IP Phones as agents in the system without needing to install any desktop 
components. Alternatively, the KCO-DPS keeps SIP alternative devices connected for the duration of 
the agent logon. 
Internet Chat Server (ICS) 
The Internet Chat Server (ICS) is the CCSP component that manages web chat sessions. The 
Internet Chat Proxy Server is a subcomponent of this server. 
Message Connection Server (MCS) 
The Message Connection Server (MCS) enables a contact center to receive email, voicemail and 
callback messages in call context. 
Messaging Server (MS) 
The Messaging Server (MS) serves as a the CCSP abstraction layer server with different types of 
Message Repositories (MSR), isolating it from each MSR brand and its specific behaviors. The MS 
collects the non-interactive media items (email, voicemail, and callback messages) that are sent  to 
the MCS servers for call context handling. 
Predictive Dialing Server (PDS) 
The Predictive Dialing Server (PDS) is used to manage telephone calling campaigns, and works with 
the Dialer Campaign Manager. 
PDS is only installed if you are using the Dialer Campaign Manager to run calling campaigns. For 
more information, refer to the CCSP Dialer Guide for Elsbeth/Sytel.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
13 
Replay 
Replay queries the recording database. The component consist of a backend API and a client-side 
application hosted in the IIS. 
Voicemail Server (VMS) 
The Voicemail Server (VMS) is the CCSP component that enables IP phone and CCSP UI users to 
retrieve voicemail. 
VoIP Connection Server (VCS) 
The VoIP Connection Server (VCS) allows incoming and outgoing voice calls. The VCS is a CCSP 
component that provides a standard H.323 or SIP interface to the network. The VCS also provides 
IVR, supervisory-monitoring capability and facilitates connection of telephone calls to users via an 
intermediate VoIP media gateway or network of gateways. The VCS also implements music on hold 
and voicemail handling. 
The VCS has member components of its own, these being: 
• 
The RTP Relay Server — receives RTP packets with destination addresses, and replaces the 
destination addresses with different IP address, UDP port, or both.  
• 
The Interactive Media Server (IMS) — supports delivery and receipt of DTMF transported 
through the network via H.245 signaling. The gateway detects DTMF signals and sends them 
to the VCS.  
Interaction recording 
Interaction recording is a standalone product that works in conjunction with your CCSP system to 
capture, store, and enable access to all caller-agent interactions, for all media types. It works with 
the VCS, ICS, MCS and CCSP UI to provide a complete record of all agent-caller interactions.  
All of the information about the recorded calls and the actual recordings themselves are stored in 
an SQL database. You can establish a separate database for each tenant. When a supervisor or 
tenant administrator selects a recording to view, the recorded data is retrieved from the database.  
The connection servers and subsystems operate according to the tenant's Designer scripts to 
decide which calls to record. Each connection server or subsystem handles this a little differently: 
• 
VCS — the VCS writes the call information and the audio streams of the call to a file on a 
network shared folder. The Data Transport Server (DTS) monitors the network shared drive 
while waiting to process new recordings. 
• 
ICS — the ICS writes the call information and the chat text from the call to a file on a network 
share. The DTS monitors this network share waiting to process new recordings. 
• 
MCS — the MCS collects the call information, the email content of the inbound email and the 
email content of any and all replies and/or forwards of this email. At the end of the call, the 
MCS uploads this information to the recording database via a web page.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
14 
• 
CCSP UI — CCSP UI is used in screen recording to capture the screen recordings from the 
user's computer and upload them via the Screen Recording Server and DTS to the recording 
database. 
Interaction recording components 
Interaction recording has components of its own: 
• 
Data Transport Server (DTS) — the DTS monitors the network shared folder(s) where the 
VCS, ICS, and SRS servers write the temporary recording information. When the DTS has 
determined that a particular file has finished being updated by the connection server, it 
processes it. This processing consists of uploading the call information (for example, time of 
call, duration of call, call type, ANI, DNIS, and email address) and the actual recording to the 
recording database. For voice calls, an additional step of combining and compressing the 
audio streams into GSM format is also performed.  
The DTS is set up during CCSP installation. For configuration instructions, refer to Configure the 
Data Transport Server in the CCSP Admin Help - Landlord online help or PDF. 
• 
Screen Recording Server (SRS) — the SRS is a virtual directory in your network that 
temporarily store the screens recorded in user sessions. It resides in one of the computers 
used as a server. The SRS receives the screen files from the Background Intelligent Transfer 
Service (BITS). 
• 
Screen Recording Service — the Screen Recording Service is a CODEC (coder/decoder) 
automatically installed on the user's computer at the time of CCSP UI installation. When screen 
recording is active, this component records screen activity and stores it in a temporary file on 
the user’s computer until it is uploaded. 
• 
Client Uploads Service — the Client Uploads Service is automatically installed on the user's 
computer at the time of CCSP UI installation. After the recording is completed or the call is 
hung up, it transfers files generated by screen recording to the Screen Recording Server, using 
BITS. 
• 
Replay — the Replay web interfaces are used by supervisors to review saved recordings. In the 
web interfaces, supervisors can sort recording by time/date, user, call type, ANI, and DNIS. 
The  Replay websites are normally established during CCSP installation. They can also be 
created by the system administrator.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
15 
Contact center performance report tools  
CCSP provides the following types of contact center performance reports: 
• 
Real-time reports — Dashboard displays current performance statistics. For more information, 
refer to the CCSP Dashboard Help. 
• 
Historical reports — Historical Reports displays historical performance statistics in standard 
reports provided with CCSP. For more information, refer to the CCSP Historical Reports Guide. 
• 
Interaction recording — Replay enables CCSP users to capture, store, and access all caller-
agent interactions regardless of the call type. For more information, refer to the CCSP Replay 
Help. 
 
The report interfaces and database structure allow each tenant access to their data without 
compromising the data privacy and security of other tenants. Since access to these reports is 
browser-based, the tenant's supervisory personnel have easy access to the contact center's 
operations from virtually anywhere. 
Tenant statistical views 
Tenants can display both historical and real-time data in detail.  
Data is displayed in a windowed format, which allows a supervisor within that tenant to have 
multiple views of their contact center on one screen. Each supervisor selects these views. 
These reports provide tenants detailed historical and instantaneous information about the 
performance of their contact center operations.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
16 
How CCSP works 
The CCSP design is based on client/server architecture connected through a local area or wide area 
network (LAN or WAN). CCSP uses the same packet switching TCP/IP-based technology that makes 
the Internet, intranets, and extranets work. 
This architecture provides a cost effective solution which is not possible with traditional ACDs, 
including direct calls from computer to computer that support voice, video, and data 
communications. 
In addition, CCSP supports email routing using CCSP's Message Communication System as well as 
private (modem-linked) dial-ins and telephone connections with IVR using CCSP's Connection 
Servers. 
Furthermore, CCSP is an open, software-based solution. This unique architecture makes it easy to 
integrate CCSP into your existing information and communications systems environment. 
 
On the Internet side, callers can use any typical computer with a current release of the Microsoft 
browser, and optionally conference software, installed. The more the computer is equipped for 
multimedia, the more communication options the caller has with the contact center users. 
With a headset, or speakers and a microphone, an Internet caller can speak with the user just as in 
a telephone call. Without a microphone, callers can chat by typing their messages while listening to 
the user. For callers without a sound card, keyboard chatting in both directions is possible. In all 
connections, the caller can see the user (if equipped with a camera), physical samples, and/or 
prepared video material. When the caller also uses a video camera-equipped computer , the user 
can see the caller and any material he or she may wish to present. The user and the caller can also 
co-browse websites and jointly fill out web forms.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
17 
Logical connections 
The CCSP back-end servers and services enable communications between the caller and the contact 
center clients. The CCSP back-end servers and services are: 
• 
Message Connection Service (MCS) 
• 
Internet Chat Server (ICS) 
• 
VoIP Connection Server (VCS) 
• 
Agent Interaction Server (AIS) 
 
All back-end servers and services reside in the CCSP Microsoft Windows domain. This simplifies 
administration tasks and provides better security. The following figure provides a visual 
representation of how the system is logically arranged.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
18 
Always On availability groups 
Note 
We recommend that you use Always On availability groups rather than database mirroring. We 
also recommend that you make Historical Reports highly available. 
 
The Always On availability groups feature is a high-availability and disaster-recovery solution that 
provides an enterprise-level alternative to database mirroring. Introduced in SQL Server 2012, 
Always On availability groups maximizes the availability of a set of user databases for an enterprise.  
An availability group supports a failover environment for a discrete set of user databases, known as 
availability databases, that fail over together. An availability group supports a set of read-write 
primary databases and one to eight sets of corresponding secondary databases.  
Optionally, secondary databases can be made available for read-only access and/or some backup 
operations. 
For information about CCSP databases, refer to  Manage database groups in the CCSP Admin Help - 
Landlord online help or PDF. 
Historical Reports 
To make Historical Reports highly available, your DBA needs to add the Microsoft Reporting 
services databases (ReportServer and ReportServerTempDB) to an availability group in SQL Server 
and configure the corresponding secondary database on each server instance that hosts a 
secondary replica.  
The availability group can be different from the one that you use for the CCSP databases. 
For information about Reporting Services with Always On availability groups, refer to 
https://docs.microsoft.com/en-us/sql/database-engine/availability-groups/windows/reporting-
services-with-always-on-availability-groups-sql-server. 
For information about adding a database to an availability group, refer to 
https://docs.microsoft.com/en-us/sql/database-engine/availability-groups/windows/availability-
group-add-a-database. 
For information about configuring the corresponding secondary database on each server instance 
that hosts a secondary replica, refer to https://docs.microsoft.com/en-us/sql/database-
engine/availability-groups/windows/start-data-movement-on-an-always-on-secondary-database-
sql-server.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
19 
Remote site survivability 
Remote site survivability (RSS) enables the installation of backend CCSP components in different 
geographical locations (sites). If disconnected from the rest of the platform, RSS enables each site 
to continue to work independently, without a disruption to callers. 
During failover, each server communicates only within the boundaries of the site using the 
resources configured in the remote site's properties. For example, when AIS needs to route a call, 
the Remote Sites properties determine the local CMS to use. For information, refer to  Manage 
remote sites  in the CCSP Admin Help - Landlord online help or PDF. 
Failover to localized operation can be initiated: 
• 
Manually — the system administrator changes system state information.  
• 
Automatically — CCSP detects connection loss and performs failover. 
 
Recovery to normal mode at the remote site is initiated manually by the system administrator. 
IP telephony 
In addition to receiving telephone calls with the built-in softphone on the user’s PC, the system also 
allows telephone calls to be delivered to alternate devices such as standard circuit-switched phones 
or IP phones behind an IP PBX, or handset behind a regular PBX.  
This flexibility is advantageous for users who do not have enough bandwidth to handle VoIP, or to 
leverage the implementation of an already existing phone setup. An additional benefit of this 
feature is that it can vary on a user-to-user basis, and the user can change it on a call-by-call basis.  
The supported devices for telephone delivery include: 
• 
Softphones – browser-based or desktop-based, either SIP or H.323 
• 
Circuit phones behind a PBX or IP PBX 
• 
Landlines, for example home phone 
• 
CCSP supports the use of SRTP for the media traffic to be encrypted on its softphone  
Personal voicemail 
In addition, users can receive Direct Inward Dial (DID) extensions with voicemail support. A contact 
center can program the voicemail service with their own prompts and create their own voicemail 
features. 
Contact centers can route calls to DID extensions via script and direct callers to leave voicemail. 
Voicemail can be retrieved through scripts. The directly dialed extensions can be used together 
with the ACD and outward dialing campaign features of CCSP.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
20 
Interactive Voice and Video Response (IVVR) 
Interactive Voice and Video Response (IVVR) allows callers to access contact center functions from 
video capable devices, such as video phones, mobile video phones, or computers, in a manner 
similar to that of IVR. 
The diagram below shows IVVR using the H.323 protocol to process incoming video calls. This 
means that gateways are required to convert the incoming video signal to H.323. If the devices 
from which the calls come in support H.323 natively, the Device Video Protocol gateway can be 
bypassed, but it is still a necessary component of the system, as an incoming H.323 signal cannot 
be guaranteed otherwise. 
 
When an incoming call is determined to be a video call, the caller is presented with video prompts, 
in a manner similar to IVR. These prompts may include audio and text. The caller responds using 
DTMF tones, and the displayed video and audio changes based on the caller's input. In addition, 
video on hold is available. 
When the call is routed to an agent, the agent workstation establishes a VCS-tromboned connection 
to the caller using a video client. 
Two Designer blocks are available to process video calls for IVVR: 
• 
Play Video 
• 
Stop Video 
 
IVVR video prompts display in one of two formats: 
• 
Common Intermediate Format (CIF) — a video format used in video conferencing systems, 
which supports both NTSC and PAL signals, with a data rate of 30 frames per second (fps), with 
each frame 352 x 288 pixels in width and height. 
• 
Quarter Common Intermediate Format (QCIF) — a video format in which frames are 176 pixels 
wide and 144 pixels high (one quarter the size of the CIF format).
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
21 
File names for video files used in the Play Video block must have the extension .avi. File name 
formats for file storage are in one of two forms: 
• 
CIF — &lt;filename&gt;_cif_&lt;bitrate&gt;Kbps_&lt;framerate&gt;fps.avi, for example, 
greeting_cif_256Kbps_30fps.avi 
• 
QCIF — &lt;filename&gt;_qcif_&lt;bitrate&gt;Kbps_&lt;framerate&gt;fps.avi 
Speech-enabled contact centers 
Speech applications enhance Interactive Voice Response (IVR) with two capabilities: 
• 
Text-to-Speech (TTS) — a technology that converts written text to audio and enables callers to 
hear the text. 
• 
Automated Speech Recognition (ASR) — a technology that allows users of IVR systems to 
speak entries instead of making a selection through DTMF. 
 
The VCS uses the Media Resource Control Protocol (MRCP) mechanism to communicate directly as 
a client device with speech servers. The VCS also supports Hewlett Packard's (HP) OpenCall Media 
Platform (OCMP) comprehensive voice and video services system as an intermediate device to 
communicate with MRCP-supporting speech servers. 
Speech servers in the market include Nuance, IBM, Telisma, and Loquendo. Enghouse Interactive 
tests speech server integration with Nuance. Other MRCP-based speech servers should also be 
compatible — check with Enghouse Interactive for the latest certifications. 
The system administrator can grant speech capabilities to some or all tenants through CCSP Admin. 
Tenants configured with these capabilities use speech-enabling blocks in Designer to create 
applications employing TTS and ASR. These blocks are: 
• 
Set Language 
• 
Define Grammar 
• 
Play text 
• 
Speech Enabled Menu 
• 
Speech Play and Collect 
 
These blocks are translated into VXML elements and carried over the MRCP interface from CCSP to 
the speech servers. When HP OCMP is used, the VXML elements are carried through the MRCP 
interface to OCMP and then to the speech servers. 
For more information on Designer and these blocks, refer to the CCSP Designer Help. 
The system administrator can deploy speech servers supporting one or many languages and 
dialects. The language is configured through the Set Language block when tenants create 
applications. 
Note 
Inform tenants which languages are available to them.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
22 
To use the speech capabilities in their Designer applications, tenant administrators create a 
grammar that specifies the words and patterns of words to be listened for by a speech recognizer. 
Grammar creation rules are specific to the third-party speech engine products used with CCSP, and 
are not covered in CCSP documentation. 
Teams integration 
CCSP enables agents to use their desktop Teams client as an alternative device for voice call 
handling, to synchronize their presence with CCSP UI, to search for contacts in the Teams directory, 
and to dial Teams contacts directly from CCSP UI. 
 
The Teams Integration consists of a server component – Teams Web Service (TWS) – and a client 
component – Teams Gadget. TWS communicates with Teams Servers to get the presences for 
Teams contacts. The Teams Gadget receives the presence updates from TWS and provides the 
ability to search and to dial Teams contacts. Dialing of Teams contacts is achieved by enabling a 
route between the VCS and Teams servers through your vendor-provided SIP or PSTN gateway. 
See Configure the VCS for Teams.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
23 
Messaging modes 
In CCSP 7.3, there are two messaging modes: 
• 
Tenant messaging database (MSR DB) and external mailboxes — recommended for new 
installations or provisioning new tenants on existing installations. From CCSP 7.3.4 onward, 
data in each MSR DB (Active-MSR DB) can be archived to a single Archive database (Archive-
MSR DB). The administration of Archive-MSR DB is available only via the new CCSP Admin. 
• 
Exchange 2010 as MSR — inherited from CCSP 7.2.x 
 
A Message Storage Repository (MSR) is required for the messaging media, which are: 
• 
Email — system-routed email and system-relayed outgoing email 
• 
Voicemail — system-routed voicemail  
• 
Callback — system-routed scheduled callbacks  
 
Each tenant has three separate data store types, one for each media type. Each data store specifies 
the MSR DB (or Exchange 2010 as MSR) to use for that data type. 
Each MSR DB can be used: 
• 
As a single or multiple media type store.  
• 
As a single or multiple tenants store. 
 
Each Active-MSR DB can optionally be associated with one Archive-MSR DB. Data is moved from the 
Active-MSR DB to the Archive-MSR DB according to the configuration definitions in CCSP Admin. 
The following table shows the data store use for the two modes. 
Data store 
MSR DB and external mailboxes 
Exchange 2010 as MSR 
Email 
Supported 
Supported 
Callback 
Supported 
Supported 
Voicemail 
Supported 
Not supported* 
* CCSP no longer sends voicemails as SMTP messages 
 
You can apply either mode, where supported, to each data store per tenant, as shown below. 
Tenant 
Data store 
Mode 
A 
Email 
MSR DB and external mailboxes 
 
Callback 
MSR DB and external mailboxes 
 
VoiceMail 
MSR DB 
B 
Email 
Exchange 2010 as MSR
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
24 
Tenant 
Data store 
Mode 
 
Callback 
Exchange 2010 as MSR 
 
VoiceMail 
MSR DB 
C 
Email 
Exchange 2010 as MSR 
 
Callback 
MSR DB and external mailboxes 
 
VoiceMail 
MSR DB 
An external mailbox is a mailbox on a mail server. The mail server must support secured IMAP and 
SMTP protocols and can be any of the following: 
• 
Exchange 2010 of an existing installation 
• 
Mail server on a private network, for example, on customer premise Exchange 2010 
• 
Cloud-based mail service, for example, Google G Suite 
 
A tenant can use multiple mail servers and can provision and operate multiple external mailboxes 
on a chosen mail server. 
Your tenants are responsible for provisioning and operating external mailboxes, unless you host 
the mail server for your tenants. Using CCSP Admin, your tenants: 
1. 
Define each external mailbox as a separate mailbox. 
2. 
Define email folders and associate mailboxes to them. Each email folder may associate with 
one mailbox. Each mailbox may associate with multiple email folders. 
 
If the chosen mail server supports using aliases, an external mailbox can use them to handle 
several email addresses. CCSP matches items in the external mailbox based on the email address 
(that is, the alias) with the email folder that has the matching alias. Using CCSP Admin, your 
tenants: 
1. 
Define one email folder per alias. 
3. 
Assign the respective mailbox to these email folders.  
 
You can migrate content from an existing Exchange 2010 MSR to an MSR DB, per tenant. For 
details, refer to the CCSP 7.2.x to 7.3.x Upgrade Guide or CCSP 7.2.x to 7.3 Tenant Migration Guide. 
To provision MSR DB and external mailboxes, refer to the Preparing MSR DB and external mailboxes 
chapter of the CCSP 730 to 73x Prerequisites Guide.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
25 
Multi-tenancy concepts 
CCSP addresses the needs of Application Service Providers (ASPs) offering hosted contact center 
services, as well individual enterprises having their own contact centers. This capability allows the 
system owner or operator, or an enterprise IT services department, referred to as the system 
administrator, to provide hosted contact center services, in the form of a virtual contact center, to 
the tenants. This service is referred to as a virtual contact center because the tenant has access to 
all contact center resources required to provision, administer and operate a live contact center in 
the same manner as if they owned the contact center infrastructure. In this model, the overall 
system provisioning and administration is distributed between system administrators and their 
tenants. Each has a defined role in the operation of the CCSP system. 
System administrator roles in a multi-tenant contact center 
The system administrator is typically the owner of the CCSP infrastructure. In this role, the system 
administrator is responsible for set-up, provisioning and maintenance of the components. These 
include all Connection Servers, ACD components and ancillary equipment and services such as 
backup and restore systems. The system administrator creates and deletes tenants and provisions 
hardware and software components of the system such as VoIP connections in the Connection 
Servers and mail administration in the MCS mail server. 
The system administrator provides personnel for system administrator level administration. These 
system administrators have the ability and permissions to provision and administer the CCSP 
resources. The system administrator is also responsible for tenant determination. This means 
provisioning the system to route the call to the proper tenant upon call arrival. For example, the 
tenant determination for a telephone call can be based on the incoming trunk group or DNIS 
information. 
Tenant roles in a multi-tenant contact center 
The tenant is typically responsible for self-provisioning of all contact center resources. This is 
accomplished through the use of CCSP Admin, which ensures that the tenant can only view and 
modify their contact center. 
This includes administration of contact center administrators, users, teams, groups, skills, queues, 
scripts, wrap-up and release codes, and accounts for the contact center. Accounts are typically used 
by a tenant who is an outsourcer, to track calls for different clients within one tenant. The 
outsourcer can assign the account name to each call for their own use, such as billing. 
Optionally, the system administrator can perform some or all of the administration of the contact 
center on behalf of a tenant. 
Administrative hierarchy for multi-tenancy 
In CCSP Admin, the system administrator is at the root and controls the infrastructure and tenant 
creation branches. The system administrator also has access to all lower branches and therefore 
can configure tenant contact center resources. The tenant administrator uses the same CCSP
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
26 
Admin, but the program displays only information relevant to the tenant, and therefore, provides 
isolation from both the system administrator and other tenants. 
System Administrator supported data 
CCSP Admin supports the following system administrator data: 
• 
Contact center name 
• 
Connection servers (server profiles) 
• 
System administrator personnel 
• 
Tenant creation and deletion 
• 
Tenant determination 
Tenant Administrator supported data 
CCSP Admin supports the following tenant administrator data: 
• 
Contact information 
• 
Personnel (agents, supervisors, and tenant administrators) 
• 
Teams 
• 
Groups 
• 
Skills 
• 
Queues 
• 
Scripts/events 
• 
Wrap-up codes 
• 
Release codes 
• 
Accounts 
• 
Block codes 
• 
Wave files 
• 
Manage files 
• 
Mailboxes
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
27 
Privacy protection 
Based on the SIP protocol, CCSP provides a refined degree of privacy protection, which the system 
administrator configures when they provision the tenants. 
Regulating information exposed to called parties 
Through CCSP Admin, the system administrator configures how each tenant handles caller identity 
and privacy. The system administrator determines if: 
• 
The caller's identity is exposed to agents. 
• 
The caller's identity is hidden from agents but exposed to scripts and the database. 
• 
The caller's identity is hidden from everything, including agents, scripts and the database. 
 
The system administrator also configures how each tenants' own identity is exposed or protected 
in the public network, or exposed to or hidden from the called party. 
Tenant uses SIP privacy information in scripts 
Tenants can use the SIP INVITE header information in contact center scripts. 
The Designer scripting tool enables tenants to use the SIP privacy header information to route 
incoming calls through their contact center. 
System administrator tasks 
After the CCSP platform has been installed, the system administrator needs to perform certain 
procedures to set up and administer the system. These procedures can be divided into these main 
tasks: 
1. 
Set up the system for use. Create a default system administrator. 
2. 
Add tenants to the system (provisioning). This process only needs to be performed once for 
each tenant. 
3. 
Perform the following system operations and administration: 
o 
Start and stop 
o 
Backup and restore 
o 
Add and delete connection servers 
 
An enterprise with its own contact center should follow the directions in this guide for provisioning 
a tenant. The contact center is the tenant of the enterprise. 
Setting up the CCSP platform 
As part of the initial installation procedure, the system administrator must ensure that the system 
is properly configured for use. This configuration process needs to be performed only once and 
consists mainly of creating one or more system administrators, who are authorized to act on behalf
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
28 
of the system administrator and who can perform the other tasks described in this Help. For more 
information on system installation, refer to the CCSP 712 to 72x Installation Guide. 
The DefaultTenant should be created as part of the CCSP installation. 
Add a new tenant 
This process, also referred to as provisioning, requires the following general steps: 
1. 
Add a new tenant to the database.  
2. 
Add at least one user with administrative rights to the tenant personnel. 
3. 
Perform other setup tasks as required. 
System operation and administration 
In addition to adding new tenants, system administrator tasks include: 
• 
Updating tenant contact information, such as contact name and address. 
• 
Performing other tasks at tenants' requests which they can't perform themselves due to 
security or domain issues. 
• 
Starting and stopping communication servers.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
29 
3: Additional tenant configuration 
Change the secret key 
Note 
• 
The Secret key should be common across the system 
• 
We recommend that you change the secret key occasionally to reduce the chance of external 
resources impersonating users by creating a fake token. 
• 
If you do not want to implement Single Sign On for CCSP UI, do not add the secret key in CCSP 
UI's web.config file. 
 
From CCSP 7.3 onwards, some of the client applications (CCSP Admin, CCSP UI, and Replay) use 
tokens to authenticate users. Tokens are created by the Authentication server, and signed using a 
secret key.  
The Secret key is like a password used by a CCSP application to authenticate a token as one 
originated by the Authentication servers. As a key, you can use any random string hashed as 256-bit 
WEP Key. 
For example:  
VgN8GWfWAsThyYVDGcqGKieMqS6jH0Mw 
0apla9wHIJsLo9yma9OxZsry5zNX3Q4s 
 
You can generate random 256 bit keys using the JWT Keys Generator UI: https://jwt-keys.21no.de 
To replace the secret key: 
1. 
Generate a random 256 bit key as described above. 
2. 
Open the Admin's web.config file and set the new OAuthSecretKey value. 
3. 
Open the Auth Server's web.config file and set the new OAuthSecretKey value. 
4. 
Open Replay's web.config file and set the new OAuthSecretKey value.  
5. 
If using SSO, open CCSP UI's web.config file and set the new OAuthSecretKey value.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
30 
Use Exchange as an external mailbox 
When using an email address that includes the domain suffix, Exchange accept the send attempts 
because that email address is part of the Exchange Accepted Domains, defined in Organization 
Configuration &gt; Hub Transport. 
However, when using an email address that uses the tenant suffix, Exchange rejects the send 
attempt unless that tenant upn suffix is defined in the Exchange Accepted Domains, defined in the 
Organization Configuration &gt; Hub Transport.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
31 
Help tenants use Designer 
Verify that the XML Interpreter is available 
To verify that the XML Interpreter has been properly loaded: 
1. 
On the navigation pane, click 
 Routing. 
2. 
On the menu, click Manage Files. The Manage files list appears.  
 
3. 
Click XMLInterpreter to view its properties. The File: XMLInterpreter dialog box appears. 
 
4. 
Do one of the following: 
o 
If the Size value is 0, then the XMLInterpreter.vbs file has not been loaded correctly and 
needs to be reloaded from …/CosmoCom/Server Components/setup/BLOBS. 
o 
If the Size value is greater than 0, click Cancel.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
32 
Use WebDAV to save scripts via HTTP 
WebDav can be used to upload Designer scripts over HTTP. On the web server that hosts Designer, 
scripts share the desired directory through web sharing. 
Since tenants generally do not have access to the contact center servers, you may be requested to 
perform this task on a tenant's behalf. 
1. 
On the server computer, right-click the Designer scripts folder and then click Properties. The 
folder Properties dialog box appears. 
 
2. 
Click the Web Sharing tab. 
3. 
Select the Share this folder check box. 
4. 
Click OK. The Edit Alias dialog box appears.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
33 
 
5. 
Select the Write check box. 
6. 
Select the Directory browsing check box. 
7. 
Click OK. 
8. 
Click OK.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
34 
Configure SRTP for a tenant 
SRTP functionality is available on the CCSP platform, using CCSP UI SIP Agents and an intermediate 
SBC device, which acts as a bridge between the VCS internal leg and the Agent application. 
Secure connection is needed only when the Agent location is outside of the protected corporate 
network. To accommodate different scenarios, you can enable or disable SRTP functionality both on 
the Tenant or Personnel level. Even if SRTP is not used, in some scenarios it is favorable to use the 
SBC device as a proxy between the Agent and the VCS. If both Use SRTP and Use SBC as Proxy are 
activated, Use SRTP takes precedence. 
Each tenant has two relevant endpoints on SBC (secure and non-secure). Particular endpoints 
should belong to only one tenant. When connecting to the secure endpoint, to establish the SRTP 
media connection, you must also protect SIP negotiation with TLS. To validate TLS connection with 
the SBC endpoint, each tenant requires a certificate signed by a Central Authority that is installed 
on the relevant SBC endpoint.  
The Central Authority certificate used for signing certificate installed on SBC also exists on Agent 
machines inside the Client Services directory. If during SIP initialization of an SRTP-enabled SIP 
Agent, a certificate with the appropriate certificate name is not found in the Client Services 
directory, or it can't be opened from some reason, a popup appears on the Agent machine and SIP 
fails to initialize. 
Note 
• 
You must configure the certificate location in ClientServiceConfig.JS. APS saves the certificates 
files in this location, creating a subfolder for each tenant ID. 
 
 
• 
If you change the certificate server location and/or want to stop the AgentWS download 
mechanism, navigate to C:\Program Files (x86)\CosmoCom\Server Components\AgentProxy and 
open Web.config in a text editor. Search for &lt;add key="Use Certificates Mechanism" 
and set the value to 0. For example: 
 
&lt;!-- SRTP Configuration --&gt; 
  &lt;add key="Use Certificates Mechanism" value="0"/&gt;  
• 
If you stop the AgentWS download mechanism, you must physically copy the certificate file 
used in the corresponding SBC endpoint to each Agent machine inside the ClientServices 
directory for that Tenant, even if you previously uploaded the certificate via CCSP Admin.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
35 
To configure SRTP for a tenant: 
1. 
In Admin: 
a. 
Add a certificate. 
b. 
Configure the following Tenant parameters:  
▪ 
SBC IP Address/Hostname 
▪ 
SBC plain transport port 
▪ 
SBC secure transport port  
▪ 
Use SBC as Proxy  
▪ 
Use SRTP 
▪ 
SRTP CA Certificate Name —   this name must match the relevant certificate file 
added under Tenants Information. 
2. 
On the CCSP server: 
a. 
Navigate to C:\Program Files (x86)\CosmoCom\Server Components\TouchPoint\ClientServices 
and open ClientServiceConfig.js in a text editor. 
b. 
Search for var certificateDirUrl = and replace "%CertificatesDirURL%"; with 
your certificate location.  
For example: 
var certificateDirUrl = 
"http://CCSP12.pj12.LOC/AgentWS/Certificates/"; 
 
3. 
Tenant Administrator: in CCSP Admin, on the [Agent name] page, on the Phone settings tab, 
optionally configure Use SRTP.  
4. 
Agents: to activate the change, each agent must log on again.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
36 
Configure tenant time zones 
The default CCSP time zone is the time zone the system administrator established for the CCSP 
platform. This can be set to coincide with where the main platform is located, or another time zone 
that is convenient for the system administrator, for example, GMT. Administrators and supervisors 
often want to see reports based on other time zones, usually because contact centers and/or users 
are located in other geographic regions. 
Each tenant can have its own list of time zones for supervisors to choose from when generating or 
subscribing to a report. The list of time zones includes captions for each time zone, usually the 
name of each contact center location, and its time zone offset. The time zone offset is defined as 
the difference between the platform time zone and the desired time zone. For example, if the 
platform time zone is set for Dublin, Ireland but the tenant is in New York, the selected time zone 
configuration would be GMT-5:00. The time zone defined for the platform is displayed in reports as 
the Default time zone and its default time zone offset is 0. 
The list of time zones for each tenant is typically created by the system administrator, since it 
requires direct access to the tenant database, but it may also be created by a tenant administrator 
who has been granted such privileges. 
You can define a list of time zones that applies to all tenants assigned to a database. 
To create a list of time zone offsets, the system administrator adds records to the 
siTimeZoneOffsets table in the historical database. The columns of the table are: 
• 
TimeZoneOffset_ID — int, primary key, ID of the time zone offset 
• 
TimeZoneOffsetinMinutes — time zone offset in minutes 
• 
TimeZoneOffsetName — nvarchar 255, name of the time zone offset. Usually, the name 
indicates the geographic location of the contact center. 
• 
ShowOnlyForTenant_ID — if not NULL, indicates this offset applies only to the specified 
tenant. If NULL, the time zone applies to all tenants assigned to this database.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
37 
 
The default table has one record with TimeZoneOffsetName set to Default, 
TimeZoneOffsetinMinutes set to 0 offset, and ShowOnlyForTenant_ID set to NULL. 
Compute the time zone offsets from the formula: 
Time Zone Offset (in minutes) = Requested Time Zone - Platform Time Zone 
For example, to create a time zone that adds 6 hours to the platform's time zone, specify 360 in 
TimeZoneOffsetinMinutes. To subtract time, include a negative value, for example, to display all 
reports an hour back, specify -60. 
The TimeZoneOffsetName serves as a label for the time zone determined by the offset.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
38 
Script-based answer supervision 
For certain ASP applications, it is necessary to begin IVR processing without sending answer 
supervision to the network. In this case, it may also be necessary for the IVR script to perform other 
call signaling activity, such as initiating answer supervision. This functionality mimics that of a PBX. 
For more information, see PBX-style answering below. 
To use script-based answer supervision, you must turn off auto-answer of a call by the VCS so that 
the IVR script can select Accept, Answer, or Reject a call. 
To turn off auto-answer: 
1. 
On the VCS computer, add the following registry subkey entry: 
HHKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\CosmoCom\Universe\CurrentVersio
n\vcs\debug\script_answer_supervision 
2. 
Set the subkey to 1. 
3. 
Restart the computer. 
 
When auto-answer is turned off, you can use the following objects to handle the call in the IVR 
script: 
• 
line.AnswerCall — causes the VCS to send a connect message to the caller. 
• 
line.AcceptCall — causes the VCS to send an alerting message to the caller. 
• 
line.RejectCall — causes the VCS to send a releaseComplete message to the caller. 
PBX-style answering 
PBX-style answering is where the Q.931 Connect to the caller is not sent before the IVR, but is sent 
under control of the IVR. This allows the caller not to be billed unless the IVR decides to take the 
call. 
For example, suppose the IVR rejects calls between 19:00 and 7:00. This mode of operation allows 
the calls to be treated as busy, not as answered, by the telephone company.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
39 
Enable Web chat in a multitenant environment 
To configure multi-tenant support for WebCaller: 
1. 
Open the folder that contains the WebCaller files. The default location is C:\Inet-
pub\wwwroot\CosmoCall. 
This folder contains subfolders like &lt;NNNN&gt;, where NNNN is the language ID. For example, 
the language ID for English (US) is 1033, so the folder will be 
C:\Inetpub\wwwroot\CosmoCall\1033. 
Each language folder has a subfolder called Default. This folder contains all the WebCaller files. 
2. 
Create a new folder under the language folder and copy all the files from the Default folder to 
the new folder. The new folder name should be identical to the tenant name, for example, 
C:\Inetpub\wwwroot\CosmoCall\1033\TenantName. 
3. 
Modify any HTML files in the new folder. 
4. 
If you need multi-language support for a new tenant, repeat steps 1-3 for each language 
folder. 
Caller language ID 
Each request for a new call has caller language ID and tenant name. ChatExtension uses caller 
language ID and tenant name to define the correct WebCaller file set. Lookup is performed by 
language ID first and by tenant name second. If the language folder does not exist, folder 1033, 
which is English, is used. If the tenant folder does not exist, the Default folder is used. 
Note 
If you change the tenant name, you must also change the folder name. 
Enable interaction recording for a tenant 
For detailed information about the recording database, refer to the CCSP Operation Guide. 
To enable a tenant to use interaction recording: 
1. 
Calculate the tenant's estimated recording database size and add to the total database size for 
all tenants. For details, see below. 
2. 
Create the tenant's recording database. For details, refer to the CCSP Installation Guide - 712 to 
72x. 
3. 
In Admin: 
a. 
Click 
 Database and add the database. In the Database type list, select Media 
Recording Database. 
b. 
Under the particular tenant's information, click 
 Tenant information and then click 
Data stores. Add the Recording Data Store.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
40 
Resolve Dashboard cross-domain authentication issues 
By default, for the Dashboard, IIS has both Negotiate (Kerberos) and NTLM set up as authentication 
methods. 
If you run the Dashboard client on untrusted machines (outside the CCSP domain), the Kerberos 
authentication cannot be completed due to ticket creation failure. The client machines then try to 
authenticate the Dashboard users against the local DC, using the principal name of the 
authenticated CCSP user. This name isn't recognized and is thus rejected. 
Negotiation then continues to NTLM, which works. 
Although there is no functional impact, using Kerberos authentication results in many 
authentication errors in the local DC. 
To resolve the Dashboard cross-domain authentication issues, you need to remove the Negotiate 
authentication method from the Dashboard IIS configuration. 
To remove Negotiate (Kerberos) authentication: 
1. 
Open IIS on the Web server where the Dashboard Web service is installed. 
2. 
In IIS Manager, in the Connections pane, expand Sites, expand Default Web Site, and then 
click rtrdll.  
3. 
In the Features View, under IIS, click Authentication. 
4. 
Under Authentication, right-click Windows Authentication and then click Providers. 
5. 
In the Providers dialog box: 
a. 
Under Enabled Providers, click Negotiate. 
b. 
Click Remove. 
c. 
Click OK. 
Connect Provisioning Portal (PRP) to CCSP Admin 
You can configure CCSP Admin to include an icon in the navigation pane that displays the 
Provisioning Portal (PRP) tool. 
To connect PRP to CCSP Admin: 
1. 
Navigate to \Program Files (x86)\CosmoCom\Server Components\Admin. 
2. 
Open configuration.js in a text editor. 
3. 
Search for prpAdminUrl: '', 
4. 
Type the PRP main page URL between the quote marks, for example: 
prpAdminUrl: 'http://CCSP1.pj16.loc/PRP/' 
5. 
Save the file.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
41 
Remove user profile folders 
The first time agents change their password, a new folder for their user profile is created in C:\Users 
on the CFM machine. 
When there are many agents, these folders consume a lot of disk space. 
To remove user profile folders: 
1. 
On the CFM machine, run gpedit.msc. 
2. 
Expand Computer Configuration, expand Windows Settings, expand Security Settings, 
expand Local Policies, and then click User Rights Assignment. 
3. 
Double-click Allow log on locally. 
4. 
Remove Users.  
Reduce agent logon time 
If you recently added a significant number of agents to CCSP or you experience prolonged logon 
times when agents try to log on, you need to update the SQL Server's statistics for the tables 
holding the logon information. 
To update the SQL Server's statistics, run the following commands from the SQL Server 
Management Studio query window: 
update statistics tPersonnel; 
update statistics tPersonnelParameters;
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
42 
Change DNS records from the command line 
You can add or delete records on the DNS server using only the command line. 
The files for this operation are included on the distribution media in the following location: 
..\software\CosmoCom, and the filename is dnsConfig.zip. 
To remove or add records to the DNS, use the two batch files dnsAdd.bat and dnsDelete.bat. 
Each batch file accepts two parameters: Server name and Server IP. You need to edit all the other 
parameters. 
To enable this functionality: 
1. 
Unzip all the files to c:\dnsconfig 
2. 
Copy the DNSprov.DLL and dnsschema.mof to the C:\Windows\System32\wbem folder. 
3. 
At the command prompt, go to \Windows\System32\wbem folder and type mofcomp 
dnsschema.mof 
4. 
Register dnsprov.dll 
 
To add a record: 
1. 
Open the command prompt. 
2. 
Go to c:\dnsConfig 
3. 
Run dnsAdd.bat dnsRecordName dnsRecordIP 
 
To delete a record: 
1. 
Open the command prompt. 
2. 
Go to c:\dnsConfig 
3. 
Run dnsDelete.bat dnsRecordName dnsRecordIP 
 
The files should be located in the DNS server. 
You can also run the script directly, for example: 
C:\cscript dnsrecord.vbs /add A domain.com myServer myServerIP /S dnsHost /U 
administrator /W password 
C:\cscript dnsrecord.vbs /delete A domain.com myServer myServerIP /S dnsHost 
/U administrator /W password
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
43 
Install G.729 codecs 
These instructions assume you know how to install G.729 codecs and provide information on how 
installation can affect the operation of your contact centers. 
Note 
To use the G729 codec, on the VCS server, the svccosmocall user needs to have full access to the 
following registry key:  
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows 
NT\CurrentVersion\Drivers32 
 
Caution 
If the G.729 codec is installed while agents are connected, their connections will be broken. 
 
To avoid this problem, follow these steps: 
1. 
Coordinate the installations with the tenant administrators. 
2. 
Log off all agents. 
3. 
Stop these services: 
o 
DTS 
o 
IMS 
o 
RTP if separate from VCS 
4. 
Install the G.729 codec on these computers: 
o 
VCSs 
o 
DTR 
o 
IMS 
o 
RTP, if separate from VCS 
5. 
Restart 
o 
DTS 
o 
IMS 
o 
RTP if separate from VCS 
6. 
Reactivate the agents.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
44 
4: Configure CCSP Admin 
This chapter explains how to customize CCSP Admin's look and feel, the options that appear on the 
navigation pane and in the associated menus, the columns that appear in the entity list views, and 
the fields that appear in the entity-type dialog boxes (screens). 
 
Note 
• 
We recommend that you make a backup copy of a file before you edit it. 
• 
Changes to the look and feel, navigation, and definitions apply to all tenants. You cannot 
customize these settings for individual tenants. 
Customize the CCSP Admin look and feel 
You can customize CCSP Admin's look and feel by using your own customized CSS file. You must 
copy your CSS file to Server Components\Admin and specify its name in the configuration file. The 
CSS file can have any name. 
To customize the CCSP Admin look and feel: 
1. 
Navigate to Server Components\Admin. 
2. 
Copy the customized CSS file into this folder. You can use a subfolder. 
3. 
Open configuration.js in a text editor. 
4. 
Search for customizationCss. By default, this property is empty. 
5. 
Set the value to /Admin/ and the CSS filename. If the file is in a subfolder, you must specify 
the rest of the path after /Admin/. 
For example:  
customizationCss: '/Admin/customization.css', 
customizationCss: '/Admin/static/css/customization.css', 
6. 
Save the file. 
7. 
To apply the changes, in CCSP Admin refresh the page by pressing F5. 
CSS examples 
To change the ID column width in the Groups list, add the following CSS rule to the customization 
file: 
.groups table .id{ width:20px;} 
  
To hide the ID column in the Groups list, add the following CSS rule to the customization file: 
.groups table .id{ display:none;}
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
45 
Customize the CCSP Admin navigation 
You can customize the options that appear on the navigation pane and in the associated menus by 
editing the navigation bar xml files. 
Caution 
In the navigation files, do not change any information in the rows. You can only comment out or 
delete rows. 
 
To customize the CCSP Admin navigation: 
1. 
Navigate to Server Components\Admin\bin\Navigations. 
2. 
To change the landlord navigation options (Tenants, Database, Tenant information), open 
LandlordNavigationBar.xml in a text editor. 
3. 
To change the tenant navigation options (Home page, Organization, Routing, and 
Miscellaneous), open TenantNavigationBar.xml in a text editor. 
4. 
Comment out or delete the rows that you do not require. 
5. 
Save the file. 
6. 
To apply the changes, in CCSP Admin log out and then log in again. 
Customize the CCSP Admin grid definition 
You can customize the columns that appear in the entity list views by editing the grid definition xml 
files. 
Caution 
In the grid definition files, do not change any information in the rows. You can only comment out 
or delete rows. 
 
To customize the CCSP Admin grid definition: 
1. 
Navigate to Server Components\Admin\bin\Grids. 
2. 
To change the landlord grid definitions, open LandlordGridsDefinitions.xml in a text editor. 
3. 
To change the tenant grid definitions, open GridsDefinitions.xml in a text editor. 
4. 
Comment out or delete the rows that you do not require. 
5. 
Save the file. 
6. 
To apply the changes, in CCSP Admin log out and then log in again.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
46 
Customize the CCSP Admin screen definition 
You can customize the fields that appear in the entity-type dialog boxes (screens) by editing the 
screen definition xml files. 
For example, the fields in the Queue dialog box are determined by the following settings in 
ScreensDefinitions.xml.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
47 
Each field of an entity screen has the following properties: 
• 
controlType 
• 
name 
• 
label 
 
Each controlType has its own additional properties, as shown in the following table. 
controlType 
Additional properties 
textBoxForString 
maxLength 
notAllowedChars 
textArea 
maxLength 
notAllowedChars 
multiselect 
controllerName 
listType 
checkBox 
N/A 
textBoxForInteger 
default 
maxValue 
minValue 
singleselect 
controllerName 
listType 
singleSelectRelatedData 
listType 
multiselectRelatedData 
listType 
 
You can also add the following true/false properties: 
• 
isDisabled 
• 
isHidden 
• 
isRequired 
 
Caution 
• 
If you change the value of a true/false property, you must be careful not to disable or 
hide required fields, such as the Name field that is required when adding a new entity. 
• 
You can remove fields from the screen by deleting the row. Do not comment out the 
row. 
• 
Do not change the values of the controlType, name, label, controllerName, and listType 
properties. You can change the other values.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
48 
To customize the CCSP Admin screen definition: 
1. 
Navigate to Server Components\Admin\bin\ScreenDefinitions. 
2. 
To change the landlord screen definitions, open LandlordScreensDefinitions.xml in a text editor. 
3. 
To change the tenant screen definitions, open ScreensDefinitions.xml in a text editor. 
4. 
Delete the rows for the fields that you do not require. 
5. 
Where allowed, edit or add properties as described above. 
6. 
Save the file. 
7. 
To apply the changes, in CCSP Admin log out and then log in again. 
Preserve customer overrides 
To preserve customizations after upgrade, create an xml file that defines what needs to be 
removed or modified and add this file’s path in the web.config.xml file. If provided, this file is read 
once on application start and stays in memory until the application is restarted. 
The example file customer_overrides_example.xml in the App_Data folder has a documentation 
section that explains the purpose of each element, including its permitted attributes and allowed 
children elements. This example file includes a full example of a customization for each thing that 
can be customized (either removed or modified). 
The default customerOverridesFilePath value in the Web.config.xml is set to a non-existent file 
called customer_overrides.xml in the App_Data folder. You can either use this path and filename for 
your xml file or change the value. 
To change the value: 
1. 
Navigate to Server Components\Admin. 
2. 
Open Web.config.xml in a text editor. 
3. 
In the &lt;appSettings&gt; section, find  
&lt;add key="customerOverridesFilePath" 
value="~/App_Data/customer_overrides.xml" /&gt;  
4. 
Change the path and file name. 
5. 
Save the file.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
49 
5: Configure CCSP UI 
For information about administering CCSP UI customizations and gadgets, including the Mini 
Wallboard, refer to the CCSP AdminPoint Help and the CCSP UI CSS Customization Guide. 
Configure the CCSP UI Updater 
Note 
• 
The initial installation of CCSP UI on an agent's computer requires Administrative rights to 
install the CCSPClientInstallationService and enable it to run under the System account. 
• 
CCSP UI supports TLS 1.0. 
 
CCSP UI Updater enables you to automatically install CCSP UI updates on an agent's computer 
using a Windows service (CCSPClientInstallationService), that runs under the System account. 
On the CCSP server machine, all CCSP UI updates are uploaded by default to 
\%ServerComponents%\TouchPoint\ClientServices.  
The CCSPClientInstallationService downloads the updates as MSI files from the CCSP server 
machine, according to the timeout interval, which is every 60 minutes by default. 
Depending on the install mode configured in ClientServicesConfig.js, the 
CCSPClientInstallationService then does one of the following: 
• 
Downloads the updates but does not install them. 
• 
Automatically installs the updates on the agent’s computer. 
• 
Asks if the agent would like to install the downloaded updates, and if yes, installs them. 
 
To configure the CCSP UI Updater: 
1. 
Navigate to \Program Files (x86)\CosmoCom\Server Components\TouchPoint\ClientServices. 
2. 
Open ClientServicesConfig.js in a text editor. 
3. 
Search for var clientServicesDirUrl and change the URL to match your installation. 
4. 
If the public address of the web server (the address used in clientServicesDirUrl) differs 
from the DNS address that the Web server knows itself by, search for var 
internalClientServicesDirUrl and change the URL to match the internal address for 
your installation.  
5. 
Search for var clientInstallationServiceTimeoutInterval and optionally, increase 
the frequency (in minutes).
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
50 
6. 
Search for var downloadInstallMode and optionally, change the download install mode. 
The options are: 
o 
0 — always download and install (default) 
o 
1 — always download but never install 
o 
2 — download and prompt for install 
 
7. 
Search for var wcfBase and change the URL to match your installation. This value is the base 
URL for client services that are implemented as a WCF service. 
8. 
Search for the Connector URLS and change them to match your installation. 
9. 
Save the file. 
 
For information about configuring the agent's computer for CCSP UI updates, refer to the CCSP 
Tenant Administrator Guide and the CCSP UI Help. 
Disable editing of the default template and system 
gadgets 
After configuring the default template and system gadgets in AdminPoint, you can make them 
read-only for all users by setting EditDefaultSettings to false. This setting does not affect custom 
gadgets and additional templates that the customer created. 
Note 
This flag disables the option to edit the default setting of system gadgets from the Gadgets 
subtab, in addition to the default template. 
 
To disable editing of the default CCSP UI template: 
1. 
Navigate to \Program Files (x86)\CosmoCom\Server Components\AdminPoint\. 
2. 
Open Web.config in a text editor. 
3. 
Search for key="EditDefaultSettings" and change the value to false. 
4. 
Save the file.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
51 
Configure MS folder change notifications 
Stop 
Do not change these settings unless instructed by Enghouse Interactive Customer Support to do 
so. 
 
AgentWS maintains a local cache of the folder structure that is used for server FolderStructure API 
requests from agent clients (for example, CCSP UI) and permissions checks for the Pull and 
GetItems operations. 
You can configure how often the AgentWS is notified of changes to a tenant's folder structure by 
the Messaging Server and by how much the tenants folder structure can have changed before the 
entire folder structure must be retrieved again by the AgentWS. 
To configure MS folder change notifications: 
1. 
Navigate to C:\Program Files (x86)\CosmoCom\Server Components\AgentProxy. 
2. 
Open Web.config in a text editor. 
3. 
In &lt;appSettings&gt;, find: 
&lt;add key="Messaging Server Get Events Interval" value ="20000" /&gt; 
&lt;add key="Folder Structure Retrieval Threshold %" value ="20" /&gt; 
4. 
In Messaging Server Get Events Interval, set the interval in milliseconds at which the 
AgentWS polls for folders structure change notifications from the Messaging Server. 
5. 
In Folder Structure Retrieval Threshold (%), set the maximum number of folders as 
a percentage of total folders in a tenant’s folder structure that can change before the entire 
folder structure must be retrieved again by the AgentWS. 
6. 
Save the file.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
52 
Configure the chat box alignment 
To configure the alignment of the chat box: 
1. 
On the CCSP UI server, navigate to C:\Program Files (x86)\CosmoCom\Server 
Components\CosmoAgent\css. 
2. 
Open chat.css in a text editor. 
3. 
Scroll to the .ChatBoxContent section and add direction:rtl; as follows: 
.ChatBoxContent 
{ 
    ... 
    overflow-x: hidden; 
    direction:rtl; 
} 
4. 
Scroll to the .ChatBoxTime section and change float:right; to  float:left; as follows: 
.ChatBoxTime 
{ 
   font: 8px italic; 
   float:left; 
   ... 
} 
5. 
Scroll to the .ChatBoxMessage section and change float:left; to  float:right; as follows: 
.ChatBoxMessage 
{ 
   float:right; 
   word-wrap: break-word; 
} 
6. 
Save the file. 
Enable multiple interaction mode for callbacks 
Note 
The callback interaction mode must be the same across all AWS instances used by a particular 
tenant. 
 
By default, single-interaction mode is enabled for callbacks.  
To enable multiple interaction mode for callbacks: 
1. 
Navigate to C:\Program Files (x86)\CosmoCom\Server Components\AgentProxy. 
2. 
Open Web.config in a text editor. 
3. 
Find add key = "Multiinteraction Callback" value = "0" 
4. 
Change to value = "1".
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
53 
Set the inactivity timer 
If a CCSP UI client is shutdown ungracefully, the Agent Proxy Server detects there are no more 
requests for events and logs off the client. The default value of the Inactivity Timeout key is 60000 
ms. 
To set the inactivity timer: 
1. 
Navigate to C:\Program Files (x86)\CosmoCom\Server Components\AgentProxy. 
2. 
Open Web.config in a text editor. 
3. Find add key = "Inactivity Timeout" value = "60000" 
4. 
Replace 60000 with your value. 
Change the email draft auto-save rate 
CCSP UI automatically saves draft email messages every 30 seconds. 
To change the auto-save rate: 
1. 
Navigate to C:\Program Files (x86)\CosmoCom\Server Components\TouchPoint\Ajax. 
2. 
Open Config.js in a text editor. 
3. 
Search for var SaveDraftInterval = 30000;  
4. 
Replace 30000 with your value. 
Enable start in toolbar mode 
In toolbar mode, the gadgetory toolbar uses as little space as possible on the user’s screen.  
By default, start in toolbar mode is not enabled. You enable start in toolbar mode and set the 
toolbar window size by editing ClientServicesConfig.js. 
To enable start in toolbar mode: 
1. 
Navigate to \Program Files (x86)\CosmoCom\Server Components\TouchPoint\ClientServices. 
2. 
Open ClientServicesConfig.js in a text editor. 
3. 
Search for var toolbarMode and change the value to true. 
4. 
Search for var toolbarWinSize and change the value to 0.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
 
54 
Configure the wallboard 
Note 
The new Mini Wallboard is not functional with the legacy wallboard API. 
 
The new Mini Wallboard uses the new Web Agent Ajax Statistics API. The APS address is used for 
this, so in Config.js, the wallBoardAddress value is set as an empty string. 
The legacy wallboard uses the legacy Web Agent Ajax Statistics API. To use the legacy wallboard API 
instead of the new Mini Wallboard, in Config.js, set the wallBoardAddress value to the url of the 
wallboard. 
To configure the legacy wallboard API: 
1. 
Navigate to \Program Files (x86)\CosmoCom\Server Components\TouchPoint\Ajax. 
2. 
Open Config.js in a text editor. 
3. 
Search for var wallBoardAddress. 
4. 
Change the value to your wallboard address, for example: 
var wallBoardAddress = 
"http://DNCCSP12.DN12.LOC/CCWALLBOARD/wallboard.aspx"; 
5. 
Save the file. 
Connect to external Web or desktop applications 
You can integrate CCSP UI with a third-party application such as a Customer Relations Management 
application. For details, refer to the CCSP UI Connector User Guide.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
55 
6: Configure Dashboard 
Configure the Dashboard service 
1. 
Navigate to \Program Files (x86)\CosmoCom\Server Components\DashboardService\DashboardWS\ and edit the parameters in 
appsettings.json. 
2. 
After changing the parameters, you must restart the application pool DashboardWSAppPool. 
Name 
Description 
Type 
Default 
CCSPServer 
URL of CCSP Server. It is the 
protocol and the IP address of the 
machine where RTR DLL Web 
Application is installed. 
String 
 
CleanProfileStatisticsInterval 
Interval to check whether it is 
necessary to remove a profile from 
the list due to inactivity 
TimeSpan 
00:05:00 
DataProviders 
List of data providers 
Array 
["DashboardExtension.RtrWebDataProvi
der"] 
FromEmailAddress 
Valid email address to use as the 
from address when thresholds are 
met and configured to send email 
notifications. 
If left empty, the email address of 
the user that saved the dashboard 
is used. 
String 
 
HttpTrace 
Enable or disable http logs 
Boolean 
false
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
56 
Name 
Description 
Type 
Default 
MaxUnauthorizedAccessCount 
BeforeSignout 
Maximum number of unauthorized 
access attempts to the RTR Web 
DLL before signout 
Int 
5 
RtrWebDataProviderHistoryUpdate 
Interval 
Refresh rate of historical statistics 
TimeSpan 
00:05:00 
RtrWebDataProviderUpdateInterval 
Refresh rate of statistics 
TimeSpan 
00:00:05 
RtrWebDllUrl 
VirtualDir of RTR 
String 
rtrdll/rtrweb.dll 
SMTPServer 
SMTP server for to send email 
alerts. Type the SMTP server name 
or IP address. 
String 
localhost 
SqlConnectionString 
Connection string for the CCSP 
database 
String 
 
SyslogLevel 
The level of logging done by the 
Dashboard Service in SysLog. The 
applicable values are the standard 
CCSP log level values. 
String 
Warning 
WorkspaceProvider 
 
String 
DashboardExtension.RtrWebWorkspaceP
rovider
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
57 
Configure the Dashboard application 
1. 
Navigate to \Program Files (x86)\CosmoCom\Server Components\DashboardService\Dashboard\assets\config\ and edit the parameters in 
app-settings.json.  
2. 
After changing the parameters, you must restart the application pool DashboardAppPool. 
Name 
Description 
Type 
Default 
apiGraphQLUrl 
HTTPS address of the service 
String 
https://localhost:5001/graphql 
defaultLanguage 
Default language of the Dashboard application. The 
possible values are: 
• 
en – English 
• 
es – Spanish 
• 
de – German 
• 
he – Hebrew 
• 
ja – Japanese 
• 
ru – Russian 
 
If left empty, English (en) is used. 
String 
en 
gadgetsLimit 
Maximum number of gadgets per report 
Int 
10 
logLevel 
Logging level. The possible values are: 
• 
TRACE 
• 
DEBUG 
• 
INFO 
• 
LOG 
• 
WARN 
• 
ERROR 
• 
FATAL 
• 
OFF 
String 
OFF
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
58 
Name 
Description 
Type 
Default 
maxReconnectionAttempts 
Maximum reconnection attempts to service. When the 
number of attempts is reached, the user is logged out 
from the application. 
Int  
10 
popupVisibilityTimerInMins 
After the Dashboard is minimized, how many minutes to 
wait until displaying the reactivate message. 
Int 
240 
reportsLimit 
Maximum number of reports per view 
Int  
6 
savePassword 
Save encrypted password in the client for the current 
session. 
Boolean 
true 
viewsLimit 
Maximum number of views per workspace 
Int  
10 
Configure the Dashboard application language 
1. 
Stop the application pool DashboardAppPool. 
2. 
Navigate to \Program Files (x86)\CosmoCom\Server Components\DashboardService\Dashboard\assets\config\app-settings.json.  
3. 
Search for parameter defaultLanguage and change the value as required. For details, see the defaultLanguage description. 
4. 
Save the file.  
5. 
Restart the application pool DashboardAppPool. 
6. 
Clear the cache in your browser and reload the Dashboard.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
59 
7: Configure Replay 
Note 
• 
To sync between screen recording and audio recording, screen recording calculates the client 
offset from the CCSP UI server in seconds. Hence the CCSP UI server and Replay server must 
have the same time zone. 
• 
The ffmpeg tool is extracted by screen recording before recording starts. Because agents 
don't have admin privileges, the ffmpeg process is extracted to the temp folder under the 
drive root. For example, if the user's temp folder is L:\AppData\User\Temp, then the drive is L: 
and the folder from which the ffmpeg executable runs is L:\Temp. 
Create the recordings download virtual directory 
The recordings download folder is the folder in which Replay stores recordings when it retrieves 
them from the database prior to playback. The default location for this folder is C:\Program Files 
(x86)\CosmoCom\Server Components\Replay\Recordings.  
You can configure an alternative location for the recordings download folder by defining it as a 
virtual directory in IIS, provided that the physical folder is accessible to the network service in the 
same way as the default recordings download folder 
To create the recordings download virtual directory: 
1. 
In IIS Manager, right-click Replay and then click Add Virtual Directory. Create a virtual 
directory, for example, ClientRecordings, linked to a network-accessible physical folder, for 
example, C:\Windows\Temp\LocalRecordings. 
2. 
Set the folder permissions to include Read and List access for ALL APPLICATION PACKAGES 
and IUSR: 
a. 
Right-click the new folder and then click Edit Permissions. 
b. 
On the Security tab, click Edit. Click Add, and then click Locations. Select your local 
machine.  
c. 
Under Enter the object names to select, type All and click OK. Ensure that ALL 
APPLICATION PACKAGES has Read and List permissions allowed. 
d. 
Click Add. Under Enter the object names to select, type IUSR and click OK.  Ensure that 
IUSR has Read and List permissions allowed. 
3. 
Edit the RecordingsDownloadFolder value in Web.config. See below.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
60 
Configure the recordings download folder 
To configure the recordings download folder path and maximum number of files: 
1. 
Navigate to Server Components\Replay and open Web.config in a text editor. 
2. 
If you want to use an alternative location for the recordings download folder, search for &lt;add 
key="RecordingsDownloadFolder" and change the value from an empty string to the 
name of the virtual directory created above, for example: 
&lt;add key="RecordingsDownloadFolder" value "ClientRecordings" /&gt;  
3. 
By default, the maximum number of processed files that are allowed in the recordings 
download folder before the oldest file is deleted to make way for a new one is 50. To change 
this number, search for &lt;add key="MaxCachedFiles" and change the value. 
Control access to recordings virtual directory 
Only the Replay application (ReplayAppPool) and the server administrator should have access to 
the Replay recordings virtual directory.  
To control access to the Replay recordings virtual directory: 
1. 
Open Windows Explorer. 
2. 
Select the recordings directory under \Program Files (x86)\CosmoCom\Server 
Components\Replay. 
3. 
Right-click the file and then click Properties. 
4. 
Click the Security tab. 
5. 
Click Edit and then click Add. 
6. 
Click Locations and then select the local machine. (Do not select the Windows domain, if the 
server belongs to one.) 
7. 
In Enter the object names to select, type IIS AppPool\ReplayAppPool. 
 
8. 
Click Check Names.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
61 
 
9. 
Click OK. 
Enable audio visualization 
Note 
Adding the waveform display may significantly increase the processing time before audio playback 
starts, if the system resources are insufficient. 
 
To enable audio visualization: 
1. 
Navigate to Server Components\Replay and open Web.config in a text editor. 
2. 
If you want audio recordings to be played with a sound waveform display, search for 
&lt;add key="AudioVisualisationEnabled" and change the value to "true".
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
62 
Streamed file names 
The format of the names of the cached files in the recordings download folder is the name of the 
file to stream to the client plus: 
• 
CallID (multi-interaction calls) 
• 
Segment number 
• 
Outro duration (screen only) 
 
The filename formats are: 
• 
Single segment audio files: 
&lt;original_filename&gt;.&lt;segment_num&gt;.&lt;segment_offset_from_image_in_s&gt;.specific.mp3 
• 
Combined segments audio files: 
&lt;call_ID&gt;.audio.full.mp3 
• 
Video files: 
&lt;original_filename&gt;.&lt;callID&gt;.&lt;segment_num&gt;.&lt;outro_length_in_s&gt;.mp4 
• 
Chat files: 
original_filename.txt 
• 
Email files: 
original_filename.eml 
Archiver Playback 
Archiver Playback is a feature that enables you to search and view recordings from archived tenant 
recording databases in addition to or instead of the tenant’s live production recording database.  
The PS Recording Archiver application creates and manages the archive recording databases. For 
information about this application, refer to the Recording Archiver User Guide. 
The PS-supplied ConfigPortal database provides access to the archiver configuration and archived 
recording databases. You must set up the ConfigPortal according to the instructions in the 
ConfigPortal Deployment Guide (version 3.0.0.1).  
To enable the Archiver Playback feature, you need to edit the Replay application configuration. 
Configuration modes 
The following modes are supported: 
• 
Off — Replay has access to the rest of the CCSP system and only the live recording databases 
for the tenants.  
• 
Online — Replay has access to the rest of the CCSP system and the live recording databases 
for the tenants. Replay accesses the archive databases through a connection to the 
ConfigPortal database.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
63 
• 
Offline — Replay has no access to the rest of the CCSP system apart from the CCSP Auth 
Server for user login. The CCSP Auth Server does not have access to the CCSP system and 
authenticates users against the local machine. The live recording databases are not available. 
Replay accesses the archive databases using connection strings in its web.config file. 
• 
On-premise (Remote Offline) — Replay has no access to the rest of the CCSP system apart 
from the CCSP Auth Server for user login. The CCSP Auth Server does not have access to the 
CCSP system and authenticates users against the local machine. The live recording databases 
are not available. Replay accesses the archive databases through a connection to the Archiving 
Master Offline database, which is a local clone of the ConfigPortal database. A Windows 
service on the local server is responsible for merging new uploaded archive databases to the 
server’s aggregated database storage.  
Configure Replay for Online mode 
For Archiver Playback feature to be available, changes to the Replay application configuration are 
required. 
1. 
Navigate to Server Components\Replay and open web.config in a text editor. 
2. 
Search for the connection string name ConfigPortalDB. 
3. 
Replace the %ConfigPortalDBConnString% placeholder with the connection string for the 
ConfigPortal database. 
4. 
Search for the ArchiverMode key. 
5. 
Change the value to "Online". 
6. 
Save the file. 
Configure Replay for Offline mode 
In this mode, only local users can be authenticated to use Replay. Details of the authorized users 
must be added to the CCSP Auth Server.  
Auth Server configuration 
1. 
Navigate to Server Components\AuthServer and open Web.config in a text editor. 
2. 
Search for the &lt;offlineModeConfig&gt; section. 
3. 
Add a new element as below: 
&lt;authorizedUsers&gt; 
&lt;/authorizedUsers&gt; 
4. 
Within this element add an entry for each user that is authorized to use Replay in this mode. 
The following information must be provided: 
o 
name — the user login name without any domain suffix 
o 
tenantId — the numeric configuration database identifier for the tenant 
o 
tenantDisplayName — the name of the tenant as it appears in the Display name field of 
the tenant properties
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
64 
For example 
&lt;add name="t1User" tenantId="1" tenantDisplayName="t1"/&gt; 
5. 
Save the file. 
Replay Server configuration 
1. 
Navigate to Server Components\Replay and open Web.config in a text editor. 
2. 
Search for the ArchiverMode key. 
3. 
Change the value to "Offline". 
4. 
Search for the &lt;offlineModeConfig&gt; section. 
5. 
Add a new element as below: 
&lt;recDbs&gt; 
&lt;/recDbs&gt; 
6. 
Within this element add an entry for each database that can be accessed in this mode. The 
following information must be provided: 
o 
name — the name of the database as it should appear in Replay 
o 
tenantId — the numeric configuration database identifier for the tenant 
o 
connectionString — the full connection string for the database 
 
For example 
&lt;recDbs&gt; 
      &lt;add tenantId="1" connectionString="data source = 
MyServer\MyInstance; Initial Catalog = t1Archive_t1_20161101; Integrated 
Security = SSPI;" 
        name="t1Archive_t1_20161101"/&gt; 
      &lt;add tenantId="1" connectionString="data source = 
10.57.34.72\SQL2016; Initial Catalog = t1Archive_t1_20190201; Integrated 
Security = SSPI;" 
        name="t1Archive_t1_20190201"/&gt; 
    &lt;/recDbs&gt; 
7. 
Save the file.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
65 
Configure Replay for On-premise mode 
In this mode, only local users can be authenticated to use Replay. Details of the authorized users 
must be added to the CCSP Auth Server.  
Auth Server configuration 
Follow the instructions for the Auth Server configuration in Offline mode. 
Replay Server configuration 
1. 
Navigate to Server Components\Replay and open Web.config in a text editor. 
2. 
Search for the connection string name ConfigPortalDB. 
3. 
Replace the %ConfigPortalDBConnString% placeholder with the connection string for the 
Archiving Master Offline database. 
4. 
Search for the ArchiverMode key. 
5. 
Change the value to "OnPremise”. 
6. 
Save the file.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
66 
8: Configure IP phones 
Configure IP phones describes the recommended method to configure IP phones for use with CCSP 
in typical CCSP environments. 
Tenants may want to use IP phones directly controlled by CCSP and used as standalone phones, 
and/or as peripheral devices with CCSP UI. 
You should create an FTP folder for each tenant that will contain a tenant-wide configuration file. 
Most deployments need to secure the location of the configuration file, since it may be accessible 
from the public Internet. Therefore, we recommend using FTP. 
Note 
The IP phone does not support provisioning of authentication credentials for HTTPS. 
Create an FTP folder for each tenant 
For each tenant that will use IP phones: 
1. 
Create an FTP folder. 
2. 
Create a Windows account with access rights to the FTP folder. 
3. 
Send the tenant's Login ID and password to the tenant administrator. 
4. 
Use the folder to pass the IP phone configuration files that the tenant needs. 
Create and assigning tenant extensions 
To create and assign tenant extensions: 
1. 
Ask each tenant administrator for a list of the extensions they will be using. Request the list in 
CSV format. 
2. 
Add the extension list to the DNIS pool.  
3. 
Assign the DNIS pool numbers to the appropriate tenant.  
Individual IP phone configuration files 
Each individual IP phone needs unique configuration files. You can provide these files for the 
tenants or the tenant administrators can create them themselves. For more information, refer to 
the CCSP Tenant Administrator Guide.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
67 
9: Configure languages 
In CCSP Admin, CCSP UI, and Dashboard, all the supported languages are part of the basic 
installation and use the language selected in Internet Options on the agent's computer. 
The other components of CCSP are only installed with English support. For further language 
customization information, contact Enghouse Interactive Customer Support. 
The CCSP-supplied files that support foreign languages are named according to specific 
conventions and usually include a language ID within the name itself. This is a numeric code that 
the Windows operating system recognizes and that is unique to each language. 
For example, the language ID for US English is 1033, and the language ID for Standard Italian is 
1040. Therefore the names of the Agent Phrase files for each of these languages are: 
Agent_Phrases_1033.txt, and Agent_Phrases_1040.txt, respectively. 
In the following topics, the language ID is replaced by &lt;LocaleID&gt;. 
Configure the back end language 
The backend language components are configured as follows. 
Chat Proxy Service 
The ACD server component ChatProxy.exe uses a ChatProxy_Phrases_&lt;LocaleD&gt;.txt file located in 
\Program Files (x86)\CosmoCom\ServerComponent\Resources\ 
The default file is US English, which is ChatProxy_Phrases_1033.txt. 
You can add a new Chat Proxy Service resource file to the Chat Proxy Resources folder. The resource 
file name must be ChatProxy_Phrases_&lt;LocaleID&gt;.txt. 
ChatExtension.dll 
The Web Server component ChatExtension.DLL uses a directory structure of \Inet-
pub\wwwroot\CosmoCall\&lt;LocaleID&gt;\&lt;TenantName&gt;Phrases.txt where: 
• 
&lt;LocaleID&gt; is the calling user language. The default is English which is 1033. 
• 
&lt;TenantName&gt; is the name of the tenant. The default is Default. 
You can create an IIS %Inetpub%\wwwroot\CosmoCall\&lt;LocaleID&gt;\Default folder and add an 
appropriate Phrases.txt file, and translated Chat Extension DLL html and templates pages. The 
tenant must provide the translated Chat Extension DLL html and templates pages. 
To present different appearances and languages per tenant, you can create a 
%Inetpub%\wwwroot\CosmoCall\&lt;LocaleID&gt;\&lt;TenantName&gt; folder.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
68 
Dashboard (legacy) 
\Program Files (x86)\Cosmocom\Server Components\CosmoDashboard\Source\Localization contains 
Strings.&lt;Locale&gt;.xaml files for each language, for example, Strings.en-us.xaml. When these files are 
published, they appear in \Program Files (x86)\Cosmocom\Server 
Components\CosmoDashboard\Published\Localization. 
The Internet Options on the computer running Dashboard must also be configured for the correct 
language. 
Dashboard Service 
\Program Files (x86)\Cosmocom\Server Components\DashboardService\Dashboard\assets\i18n and 
\Program Files (x86)\Cosmocom\Server Components\DashboardService\DashboardWS\Assets contain 
&lt;Locale&gt;.json files for each language, for example, en.json.  
The language can be chosen at login time. 
SQL Server 
\Program Files (x86)\CosmoCom\Server Components\Setup contains adminDictionary&lt;LocaleID&gt;.SQL 
files for each language which, when run, add the appropriate language files to the database. 
To add language files to the database: 
1. 
Log on to the computer that contains the SQL Server configuration database. 
2. 
Start Microsoft SQL Query Analyzer. 
3. 
Open the languages.sql file in the folder for the language you wish to add to the Administrator 
interface. 
4. 
Press F5 to run the query. 
5. 
Open the appropriate .SQL file for the language you wish to add to the Administrator 
interface. 
6. 
Press F5 to run the query. 
7. 
Close the Query Analyzer. 
 
The Internet Options on the computer running CCSP Admin must also be configured for the correct 
language.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
69 
Enable different Web chat languages for tenants 
You can change the messages on a tenant-by-tenant basis. Before connecting to the Cha-
tExtension.DLL, the website determines the tenant and sets the TenantName 
Calling_User_Language parameters accordingly. 
To enable different web chat languages for different tenants: 
1. 
Define a new language number (locale ID) for each tenant. This must not correspond to any of 
the known numbers used by Windows. 
2. 
Edit the ChatProxy_Phrases_&lt;LocaleID&gt;.txt for each tenant, and place this file in the \Program 
Files (x86)\CosmoCom\ServerComponent\Resources directory. 
3. 
Edit the Phrases.txt for each tenant, and create a new directory structure 
\Inetpub\wwwroot\CosmoCall\&lt;LocaleID&gt;\&lt;TenantName&gt; where &lt;LocaleID&gt; is the new 
language number for the tenant and &lt;TenantName&gt; is the actual tenant name. 
 
For example, to enable different languages for two tenants, RostovCo and YMS_SystemsCo: 
1. 
Assign RostovCo the locale ID of 8000 and assign YMS_SystemsCo the locale ID of 8001. 
2. 
For ChatProxy.exe, edit the ChatProxy_Phrases_&lt;LocaleID&gt;.txt for each tenant: 
o 
\Program Files\CosmoCom\ServerComponent\Resources\ChatProxy_Phrases_8000.txt 
o 
\Program Files\CosmoCom\ServerComponent\Resources\ChatProxy_Phrases_8001.txt 
3. 
For the ChatExtention.DLL, make two copies of Phrases.txt and edit one for each tenant. 
4. 
Create the following directories and place the associated Phrases.txt files in each directory: 
o 
\Inetpub\wwwroot\CosmoCall\8000\RostovCo\ 
o 
\Inetpub\wwwroot\CosmoCall\8001\YMS_SystemsCo\ 
 
To change chat colors, edit the settings of the following registry subkey: 
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Cosmocom\ChatExtension\Param-
eters\TenantName\ChatSystemMsgColor 
See also Enabling Web chat in a multitenant environment. 
Configure the callback dialog language 
To configure the language of the Schedule a Callback dialog: 
5. 
Navigate to the C:\Program Files (x86)\CosmoCom\Server 
Components\CallBackScripts\App_GlobalResources folder. 
6. 
Make a copy of Resource.RESX and rename as Resource.&lt;LocaleID&gt;.RESX, for example, 
Resource.de.RESX. 
7. 
Open Resource.&lt;LocaleID&gt;.RESX in Visual Studio. 
8. 
Replace the default values with the translations. 
9. 
Save the file.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
70 
10: Configure the VCS 
When the VCS is properly installed, it must be configured using both CCSP Admin and by changing 
and adding some H.323 stack parameters. This configuration depends on whether you are using a 
gatekeeper environment. 
Note 
Although you can use the VCS without a gatekeeper, we recommend that you install a 
gatekeeper or multiple gatekeepers as part of your contact center. 
The gatekeeper offers centralized management of gateways and registered endpoints, is 
software-only, and is usually provided by the gateway manufacturer. 
 
To configure the VCS in CCSP Admin: 
1. 
Enter the E.164 numbers to be used by the VCS for routing (gatekeeper only).  
2. 
Create E.164 groups that contain at least one E.164 number (gatekeeper only).  
3. 
Create VCS groups that contain E.164 groups (gatekeeper only).  
4. 
Configure the VCS parameters. 
Features and capabilities 
The VCS is a software-only solution that includes the following features and capabilities. 
Gatekeeper registration 
The VCS includes the ability to register with an external gatekeeper via standard H.323 methods: 
• 
The VCS advertises the E.164 address for each of the supported dialed numbers of the contact 
center. E.164 addresses for individual agents are not supported. 
• 
The VCS can receive CLID/DNIS digits and the originally dialed number from the gateway and 
gatekeeper, subject to the gateway and gatekeeper configuration. 
• 
The RADVision stack configuration file and administrator data determines whether the system 
will register with a gatekeeper, manual vs automatic discovery, terminal type, aliases, and time 
to live values. 
Inbound/outbound dialing 
The VCS can direct voice calls to CCSP UI and provide outbound dialing capability for the agents. 
The outdialing is based on E.164 numbering through the gatekeeper and may dial any valid phone 
numbers through the gateway. 
VCS terminated and originated calls support voice media.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
71 
IVR capabilities and limitations 
The VCS has the following IVR capabilities and limitations: 
• 
The IVR provides the capability to record caller messages and play pre-recorded audio 
prompts to a caller that is being processed in the VCS. 
• 
The VCS supports delivery and receipt of DTMF, transported through the network via H.245 
signaling. 
• 
The VCS .wav files must be 16-bit, 8Khz, Mono. At startup, the Interactive Media Service (IMS) 
reads the database and creates a local copy of all the media files. If the local version of a 
particular media file exists, and it is determined to be the most current version, the file will not 
need to be recopied from the database. 
• 
Two timeouts are associated with recordings that are specified by the VoIP Call Control 
Module issuing a request. They are the total record timeout, which specifies the maximum 
amount of media that can be recorded, and the no voice data time. The no voice data timeout 
occurs when either RTP packets stop being transmitted to the IMS or the RTP packets contain 
silence. A silence detection algorithm is used to detect silence. 
• 
The VCS supports scripting languages for use in IVR applications. When the script requires that 
audio be spoken or that audio be recorded, the VCS uses the IMS to perform the task. 
Monitoring capabilities 
The VCS supports supervisor monitoring capabilities, including silent and whisper monitoring of 
calls. 
Codecs 
The VCS fully supports G.711 aLaw and muLaw, and G.729. G.723.1 is not supported with PJSIP. See 
Install G.729 codecs. 
Multiple VCSs 
The VCS architecture allows for each VCS server to use any number of RTP Relay servers. 
Load balancing 
Load balancing is achieved by using the Microsoft Network Load Balancer (NLB) as a front end to a 
number of VCSs, each registering the same E.164 aliases. The NLB is a distributed system, running 
on each of the load balanced systems.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
72 
Multiple gateway service policy 
When a VCS is connected to multiple gateways: 
• 
The VCS tries the gateways in round robin order. 
• 
When a gateway fails, the VCS tries the next one. The VCS keeps trying until the list of 
gateways is exhausted. 
System administration and configuration 
System administrators use CCSP Admin and reporting tools to administer the VCS. CCSP Admin 
treats the VCS as a type of connection server and lists the VCS under Server Profiles.  
The system supports the configuration of stack parameters. Two configuration files are used to 
configure the operation of the H.323 protocol stack, created during VCS installation. They can be 
manually edited on the local VCS, if required. See Set the RTP frame packet size. 
System administrators can view VCS performance statistics through Historical Reports. 
Components 
The VCS has three main components: 
• 
VoIP Call Control — routes H.323 messages using H.323 stack to the agent and IMS. The VCS 
implements the H.323 version 2 standard. H.225 RAS signaling, H.245 Control signaling. 
• 
Interactive Media Server (IMS) — plays prompts and records voice messages. 
• 
RTP Relay Module — receives RTP and RTCP packets and routes the data into and out of the 
contact center under control of the VoIP Call Control component. 
Signaling features 
Gatekeeper discovery 
A gatekeeper discovery message (GRQ) sent to the gatekeeper address results in a response (GCF) 
indicating a transient gatekeeper address that has been enabled for the anticipated registration 
request. The VCS sends GRQs to a configurable port and IP address on the external side of the 
gatekeeper. The address may or may not be known (multicast). 
Registration 
Registration requests are sent to the address and port indicated in the GCF. The address/port 
provided by the discovery mechanism is only valid for the duration of the subsequent registration. 
During registration the VCS advertises the E.164 address for each of the supported dialed numbers 
of the contact center, but not for the individual agents connected to the system. 
The registration needs to provide a keep alive interval that the VCS expects for re-registration 
during the initial registration process.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
73 
Keep Alive interval 
The VCS has a configured interval for Keep Alive, and re-registers at the smaller specified interval. 
The Keep Alive parameter is sent in a registration request from the VCS to its gatekeeper, to keep 
the registration active for a given amount of time. This is useful if the registration is about to expire 
based on the endpoint's Time to Live. 
Terminate connection 
The ports activated by discovery close after a timeout if the discovery is not followed by 
registration. 
H.225 call setup 
The H.225 call setup is used for call setup, alerting, tear down, and other connection oriented 
signaling. 
H.245 control channel 
The H.245 control channel is responsible for control messages governing operation of the H.323 
terminal, including capability exchanges, commands, and indications. H.245 tunneling is supported 
by default. 
IVR handling 
DTMF digits received from the PSTN are transported through the VoIP network and delivered to the 
H.323 endpoint via the H.245 message UserInputIndication, if this is supported by the gateway 
(DTMF relay). 
SIP signaling 
The VCS supports SIP signaling over UDP and TCP transport protocols.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
74 
Set the RTP frame packet size 
VCS installation creates two separate H.323 stack configuration files that are located in the 
C:\Program Files (x86)\CosmoCom\Server Components directory. 
These files are: 
• 
config.int — affects interactions between the VCS and IMS and any agents logged on to the 
contact center. 
• 
config.ext — affects external communications coming into the VCS and registration with the 
gatekeeper. 
 
You must edit the stack files so that the RTP frame packet size matches the frame size of the 
gateways you use. 
Note 
All entries are case-sensitive. 
 
To set the RTP frame packet size: 
1. 
In the config.int file, find all of the lines in the file that reference g711 and look like the 
following: 
g711Ulaw64k = nn 
g711Alaw64k = nn 
2. 
Replace the nn with the appropriate value for your gateway. 
3. 
Save the config.int file, overwriting the older version. 
4. 
In the config.ext file, find all of the lines in the file that reference g711. There should be four of 
them and they should look like the following: 
g711Ulaw64k = nn 
g711Alaw64k = nn 
5. 
Replace the nn with the appropriate value for your gateway. 
6. 
Save the config.ext file, overwriting the older version. 
 
For more information on the H.323 stack and its entries and parameters, see Stack configuration.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
75 
Debug the VCS 
The events associated with the components of the VCS (IMS, VoIP Call Control and RTP Relay) are 
logged in C:\Program Files (x86)\Common Files\CosmoCom\CosmoCall Universe\syslogd\vcs.txt. 
To turn on verbose logging of these events: 
1. 
Start the Registry editor and find the appropriate key for each of the following components: 
o 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\CCUInteractiveMediaServer
\Parameters\] 
o 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\CCURTPRelay\Parameters\] 
o 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\CCUVoIPCallControl\Param
eters\] 
2. 
Double-click the V entry and set the Value data to 255. The value of 255 sets logging to its most 
verbose level. Use a less verbose level to create smaller log files. 
Limiting the log file size 
There is no current way to limit the size of the vcs.txt file. It will continue to add lines of information 
as long as the registry is set as described above. 
However, you can create a batch file, which should be run daily to delete the vcs.txt file or any of 
the logging text files in the ..\syslogd directory. 
This file must: 
1. 
Stop the CosmoCall Universe Syslog service. 
2. 
Delete the .txt files. 
3. 
Restart the CosmoCall Universe Syslog service.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
76 
Configure VCS load balancing 
To load balance the VCS, you need at least two clustered nodes. 
Each VCS must have at least three IP addresses bound to it: 
• 
Internal stack IP 
• 
External stack IP (dedicated host IP) 
• 
NLB IP (NLB shared primary host IP) 
 
When Network Load Balancing (NLB) support is enabled, the external stack is used for outbound 
calls only. Inbound calls are sent to the shared NLB address, therefore the gateway must be 
configured accordingly. 
To configure VCS load balancing: 
1. 
In CCSP Admin, under System information, create a VCS group, which can have any name.  
2. 
Configure the VCS group as follows: 
o 
NLB IP Address — set to the primary host IP address configured within the properties of 
NLB. This is the shared NLB address. 
o 
NLB Port — set to 1720. 
o 
Under System information &gt; Services, configure the internal stack, and external stack IP 
addresses for each VCS as you would normally.  
3. 
Select the Under NLB check box and add the VCS group you just created. 
4. 
Restart each VCS. 
Configure the VCS for Teams 
For CCSP UI to be able to dial a Teams contact using its SIP URL (for example, 
someone@company.com), the VCS must be able to resolve the domain portion of the URL to a 
defined host or gateway. The routing between the VCS and the Teams server is specific to your 
system infrastructure and will normally be through your vendor-provided SIP or PSTN gateway. 
See Teams integration.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
77 
Stack configuration 
To minimize the obstacles to interoperability with other manufacturer's VoIP devices, the 
RADVision H.323 Protocol Stack has been incorporated into the product. The protocol stack from 
RADVision is used for the following: 
• 
H.245 for call control 
• 
Q.931 for call signaling 
• 
RAS (Registration, Admissions, and Status) signaling functions 
Note 
CCSP configuration settings are stored in the config.ext and config.int files. 
These parameters are the set of values that determine the default settings under which an 
endpoint functions throughout an H.323 conference. 
The four types of stack configuration parameters are: 
• 
System 
• 
RAS 
• 
Q.931 
• 
H.245 
Each type is arranged in a separate ASN.1 tree. Each tree follows the description of the ASN.1 
structure as specified in the appropriate H.323 Recommendation. For example, the H.245 
parameters tree reflects the ASN.1 structure in the H.245 Recommendation. As soon as the 
endpoint is activated, the stack reads the stack configuration parameters and acts accordingly. 
From this stage on, the parameters are a part of the stack. Although most of the parameters 
remain constant throughout the H.323 conference, some parameters can be changed dynamically 
during runtime using the stack configuration API. 
Within these categories the manual parameters affect the way your application will use the API. The 
manual parameters include the following and are discussed below in the relevant sections: 
• 
System.manualStart. 
• 
RAS.manualRas. 
• 
RAS.AllowCallsWhenNonReg. 
• 
RAS.manualDiscovery. 
• 
RAS.manualRegistration. 
• 
Q931.manualAccept. 
• 
Q931.autoAnswer. 
• 
H.245.MasterSlaveConf.manualOperation. 
• 
H.245.MasterSlaveConf.manualResponse. 
• 
H.245.CapabilitiesConf.manualOperation. 
 
Note 
We recommend that new users of the RADVision H.323 Protocol Stack disable the manual keys 
and let the stack make the necessary choices.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
78 
System parameters 
System parameters are general configuration parameters used during initialization, for example, to 
determine memory allocation and define the number of calls and channels per call. 
You cannot change system parameters after cmInitialize(). 
Syntax 
PDLSystemConfiguration ::= SEQUENCE 
{ 
manualStartNULLOPTIONAL, 
pdlNameOCTETSTRINGOPTIONAL, 
cidAssociateNULLOPTIONAL, 
delimiterOCTETSTRING(SIZE(1))OPTIONAL, 
allocationsSEQUENCE 
{ 
vtPoolSizeINTEGER(0..2147483647)OPTIONAL, 
vtNodeCountINTEGER(0..2147483647)OPTIONAL, 
channelsINTEGER(0..2147483647)OPTIONAL, 
chanDescsINTEGER(0..2147483647)OPTIONAL, 
messagesINTEGER(0..2147483647)OPTIONAL, 
nameChansINTEGER(0..2147483647)OPTIONAL, 
tpktChansINTEGER(0..2147483647)OPTIONAL, 
udpChansINTEGER(0..2147483647)OPTIONAL, 
protocolsINTEGER(0..2147483647)OPTIONAL, 
maxProcsINTEGER(0..2147483647)OPTIONAL, 
maxBuffSizeINTEGER(0..65536)OPTIONAL, 
}OPTIONAL, 
maxCallsINTEGER(0..2147483647)OPTIONAL, 
maxChannelsINTEGER(0..2147483647)OPTIONAL, 
maxRasInTransactionINTEGER(0..2147483647)OPTIONAL, 
maxRasOutTransactionINTEGER(0..2147483647)OPTIONAL, 
} 
Parameters 
The system parameters and structure are as follows. 
manualStart 
When this parameter is present, it indicates whether the stack or the application initiates network 
activity at initialization time. If you set manualStart, the stack does not initiate network activity and 
the application must call the cmInitialize() function, change any non-system parameters, and then 
call cmStart() to complete the stack initialization. 
pdlName 
When this parameter is present, it contains the name of the external PDL object file. When 
pdlName is not set, the stack uses an internal PDL object. If there is no internal PDL object in the 
stack, give the name of the external PDL file.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
79 
cidAssociate 
When this parameter is present, it indicates that the stack should associate calls according to their 
conferenceID value. 
delimiter 
The character used as a delimiter between fields, such as in the destAddress and srcAddress fields 
in the cmCallMake() function. 
allocations 
This structure sets the maximum values for controlling stack initialization allocations: 
• 
vtPoolSize — the maximum size of the PVT pool. The PVT pool is the memory used to store the 
PVT string. There is no need to set this parameter since it is obsolete and kept only for 
backward compatibility. 
• 
vtNodeCount — the maximum number of PVT nodes allowed in all the trees in the system. 
There should be a node for each ASN field in an ASN message. For each string in a message 
(for example, alias), a node supplies 20 bytes of storage space, meaning that the required 
nodes for string = bytes of string/20. Each node requires 28 bytes. Allocation should take into 
account the memory available to the system. 
• 
channels — the maximum number of channels allowed in the system. A channel is a link 
between a PDL state machine and the network. Each channel requires 40 bytes. Allocation 
should take into account the memory available to the system. 
• 
chanDescs — the maximum number of channel types in the system. There is no need to set 
this parameter since it is obsolete and kept only for backward compatibility. 
• 
messages — the maximum number of messages allowed for simultaneously queuing in all 
channels. Each message requires 20 bytes. Allocation should take into account the memory 
available to the system. This parameter is obsolete and kept only for backward compatibility. 
• 
nameChans — the maximum number of name channels allowed in the system. This parameter 
is obsolete and kept only for backward compatibility. 
• 
tpktChans — the maximum number of TPKT channels allowed in the system. Each TPKT 
channel requires 4.1 kilobytes. Allocation should take into account the memory available to the 
system. 
• 
udpChans — the maximum number of UDP channels allowed in the system. There is no need 
to set this parameter. 
• 
protocols — the maximum number of PDLAPI protocols allowed in the system. Each requires 
60 bytes. Allocation should take into account the memory available to the system. 
• 
maxProcs — the maximum number of PDL state machines allowed in the system. Each 
requires 1 kilobyte. Allocation should take into account the memory available to the system. 
• 
maxBuffSize — the maximum buffer required for TPKT channels. The default is 2K. 
Optional allocation parameters 
The following allocation parameters are optional:
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
80 
• 
maxCalls — the maximum number of concurrent calls allowed. 
• 
maxChannels — the maximum number of concurrent channels allowed. 
• 
maxRasInTransaction — default definition for controlling the memory allocation for RAS 
transactions based on the maximum number of calls. Defined as maxCalls*2+10. 
• 
maxRasOutTransaction — default definition for controlling the memory allocation for RAS 
transactions based on the maximum number of calls. Defined as maxCalls*2+10. 
H.245 parameters 
H.245 parameters specify timeouts for different procedures in the H.245 protocol. The H.245 
parameters are contained in the following structures: 
• 
MasterSlaveConf — parameters for the master/slave determination procedure. 
• 
CapabilitiesConf — parameters related to information on endpoint and sending capabilities. 
• 
ChannelEntry — a list of channel entries. Each entry defines the parameters of a channel. 
• 
ModeEntry — a list of mode entries. Each entry defines the parameters of a mode. 
 
You can change the parameters at runtime unless specified otherwise. 
Syntax 
PDLH245Configuration::=SEQUENCE 
{ 
masterSlaveMasterSlaveConfOPTIONAL, 
capabilitiesCapabilitiesConfOPTIONAL, 
channelsSEQUENCEOFChannelEntryOPTIONAL, 
modesSEQUENCEOFModeEntryOPTIONAL, 
channelsTimeoutINTEGER(0..65535)OPTIONAL, 
roundTripTimeoutINTEGER(0..65535)OPTIONAL, 
requestCloseTimeoutINTEGER(0..65535)OPTIONAL, 
requestModeTimeoutINTEGER(0..65535)OPTIONAL, 
mediaLoopTimeoutINTEGER(0..65535)OPTIONAL, 
} 
MasterSlaveConf::=SEQUENCE 
{ 
terminalTypeINTEGER(0..255), 
manualOperationNULLOPTIONAL, 
manualResponseNULLOPTIONAL, 
timeoutINTEGER(0..65535)OPTIONAL, 
} 
CapabilitiesConf::=SEQUENCE 
{ 
terminalCapabilitySetTerminalCapabilitySet, 
manualOperationNULLOPTIONAL, 
timeoutINTEGER(0..65535)OPTIONAL, 
} 
ChannelEntry::=SEQUENCE 
{ 
nameIA5String(SIZE(1..128)), 
dataTypeDataType, 
isDynamicPayloadTypeNULLOPTIONAL,
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
81 
} 
ModeEntry::=SEQUENCE 
{ 
nameIA5String(SIZE(1..128)), 
modeModeElement, 
} 
Parameters 
The H.245 parameters and structures are as follows. 
channelsTimeout 
The timeout in seconds of the channel establishment. 
roundTripTimeout 
The timeout in seconds of the round trip procedure. 
requestCloseTimeout 
The timeout in seconds of the request close procedure. 
requestModeTimeout 
The timeout in seconds of the request mode procedure. 
mediaLoopTimeout 
The timeout in seconds of the media loop procedure. 
MasterSlaveConf 
This structure includes the parameters needed for the master/slave determination procedure: 
• 
terminalType — the terminal type, for example, 60 for a gateway. The effect of a runtime 
change is seen at the next call. 
• 
manualOperation — when this parameter is present, it cancels the automatic master/slave 
determination procedure. The application developer needs to use the CM API functions to 
execute the master/slave determination procedure manually. The effect of a runtime change is 
seen at the next call. 
• 
manualResponse — when this parameter is present, it cancels the automatic 
acknowledgement for the master/slave determination procedure. It allows the application to 
specify statusDeterminationNumber and acknowledge the procedure as required. The effect 
of a runtime change is seen at the next call. 
• 
timeOut — the maximum time in seconds that the stack waits for a response to the master/ 
slave inquiry before it decides it cannot perform the master/slave determination.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
82 
CapabilitiesConf 
This structure holds the parameters related to information on endpoint and sending capabilities: 
• 
terminalCapabilitySet — holds the terminal capabilities. When running a basic H.323 
conference, the stack reads these default capabilities and acts according to them. The default 
values of the parameters in this set are suitable for most terminal types. This capability set 
should be reviewed to ensure that the parameter values are suitable for the endpoint. The 
terminalCapabilitySet is defined in the H.245 Recommendation. The effect of a runtime change 
is seen at the next call. 
The application can also use accessory and advanced functions to dynamically change default 
capabilities at runtime, in which case you may not need to change capability parameters. 
• 
manualOperation — when this parameter is present, it instructs the stack not to send the 
capabilities of an endpoint and cancels auto mode. The application developer needs to use the 
CM API functions to execute the capability exchange. The effect of a runtime change is seen at 
the next call. 
• 
timeOut — the maximum time in seconds that the stack waits before it decides that the called 
party will not acknowledge receipt of the capabilities it sent. 
ChannelEntry 
This structure provides a list of channel entries. Each entry defines the parameters of a channel: 
• 
name — the name that identifies the channel. You can use any name. The cmChannelOpen() 
function uses this name. 
• 
dataType — an internal standard structure that defines the types of information streams and 
their parameters. DataType is defined in the H.245 Recommendation. 
• 
isDynamicPayloadType — when this parameter is present, it tells the stack that the channel 
supports dynamic payload. This parameter is obsolete and kept only for backward 
compatability. The recommended parameter is cmChannelSetDynamicRTPPayloadType. 
ModeEntry 
This structure provides a list of mode entries. Each entry defines the parameters of a mode: 
• 
name — the name that identifies the mode. You can use any name. 
• 
mode — an internal standard structure that defines the types of information streams and their 
parameters. 
 
The ModeEntry is defined in the H.245 Recommendation. 
Q.931 parameters 
The Q.931 parameters configure the Q.931 protocol. 
You can change the parameters at runtime unless specified otherwise.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
83 
Syntax 
{ 
responseTimeOutINTEGER(1..200), 
connectTimeOutINTEGER(1..20000), 
callSignalingPortINTEGER(0..65535), 
maxCallsINTEGER(0..65535), 
manualAcceptNULLOPTIONAL, 
notEstablishControlNULLOPTIONAL, 
earlyH245NULLOPTIONAL, 
autoAnswerNULLOPTIONAL, 
manualCallProceedingNULLOPTIONAL, 
overlappedSendingNULLOPTIONAL, 
H245TunnellingNULLOPTIONAL, 
T302INTEGER(1..200)OPTIONAL, 
T304INTEGER(1..200)OPTIONAL 
} 
Parameters 
The Q.931 parameters are as follows. 
responseTimeOut 
The maximum waiting time for the first response to a new call. If no response is received during 
this time, the stack launches the Disconnect procedure. The effect of a runtime change is 
immediate. 
connectTimeOut 
The maximum time that the stack waits for the establishment of a new call, after receiving the first 
response to the call. If the call is not established during this time, the stack launches the Disconnect 
procedure. The effect of a runtime change is immediate. 
callSignalingPort 
The number of the port that receives the calls directed to the endpoint. If this parameter is set to 0, 
the operating system looks for an available port. The effect of a runtime change is only seen after 
STOP/START is applied once, at START. 
maxCalls 
The maximum number of concurrent calls allowed. If this number is exceeded, the stack returns a 
state of busy. The effect of a runtime change is seen at the next call. 
manualAccept 
When this parameter is present, the stack does not automatically accept a call, meaning that the 
stack sends a Call Proceeding message and not an Alerting message. To accept the call, meaning to 
send an Alerting message, use the cmCallAccept() function. The effect of a runtime change is seen 
at the next call.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
84 
notEstablishControl 
When this parameter is present, it causes Q.931 not to move to the H.245 control stage. The effect 
of a runtime change is seen at the next call. 
earlyH245 
When this parameter is present, it causes Q.931 to send and accept H.245 address in the Setup 
message. The effect of a runtime change is seen at the next call. 
autoAnswer 
When this parameter is present, it causes Q.931 to automatically answer calls. You can call the 
cmCallAnswerExt() function while in the cmEvCallStateOffering state to supply display and user 
information. In auto answer mode, the only message sent in response to the Setup message is the 
Connect message. 
manualCallProceeding 
When this parameter is present, the stack does not automatically send a Call Proceeding message. 
To send the message, use the cmCallSendCallProceeding() function. 
overlappedSending 
Indicates that the application supports overlap sending. 
H245Tunneling 
Specifies that an endpoint can support H.245 tunneling. When this parameter is present, tunneling 
is always to be used unless the other party does not support tunneling, or the application 
specifically requests not to use tunneling. 
T302 
The maximum waiting time for address data on the incoming side during an overlapped sending 
procedure. 
T304 
The maximum waiting time for address data on the outgoing side during an overlapped sending 
procedure. 
RAS parameters 
The RAS parameters configure the RAS protocol. 
You can change the parameters at runtime unless specified otherwise.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
85 
Syntax 
PDLRASConfiguration::=SEQUENCE 
{ 
responseTimeOutINTEGER(1..200), 
gatekeeperNULLOPTIONAL, 
manualRASNULLOPTIONAL, 
maxFailINTEGER(1..200), 
allowCallsWhenNonRegNULLOPTIONAL, 
manualRegistrationNULLOPTIONAL, 
manualDiscoverySEQUENCE 
{ 
defaultGatekeeperTransportAddress 
}OPTIONAL, 
registrationInfoSEQUENCE 
{ 
terminalTypeEndpointType, 
terminalAliasSEQUENCEOFAliasAddressOPTIONAL, 
gatekeeperIdentifierGatekeeperIdentifierOPTIONAL, 
endpointVendorVendorIdentifierOPTIONAL, 
timeToLiveTimeToLiveOPTIONAL 
}OPTIONAL, 
rasMulticastAddressTransportAddress, 
rasPortINTEGER(0..65535), 
compare15bitRasCrvNULLOPTIONAL, 
maxRetriesINTEGER(1..200), 
maxMulticastTTLINTEGER(0..200)OPTIONAL, 
overlappedSendingNULLOPTIONAL, 
PreGrantedArqUse::=CHOICE 
{ 
directNULL, 
routedNULL, 
}OPTIONAL, 
} 
Parameters 
The RAS parameters are as follows. 
responsetimeout 
The amount of time in seconds that the stack waits until it notifies the application that the called 
party has failed to respond to a transaction. After the given number of seconds, the stack calls 
cmEvRASTimeout(). The effect of a runtime change is immediate. 
gatekeeper 
When this parameter is present, a gatekeeper application is the running application. Otherwise, an 
endpoint application is the running application. The presence or absence of this parameter 
influences stack behavior. For example, if not present, the stack adds the endpoint Id to all 
messages directed to the gatekeeper. You cannot change this parameter at runtime.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
86 
manualRAS 
When this parameter is present, the stack disregards the automatic RAS mechanism and expects 
the application to implement RAS transactions explicitly via RAS functions. When the parameter is 
absent, the stack uses the internal RAS mechanism (basic level). You cannot change this parameter 
at runtime. 
allowCallsWhenNonReg 
When this parameter is present, the stack allows the establishment of calls even when an endpoint 
cannot register with a gatekeeper. This option applies to calls with a known destination transport 
address. 
maxFail 
The maximum number of attempts to register with the gatekeeper before the stack allows call 
establishment without registration, provided that allowCallsWhenNonReg has been set. 
manualRegistration 
When this parameter is present, the stack (manually) registers an endpoint with the gatekeeper 
only when the cmRegister() function is called. When absent, the stack automatically registers the 
endpoint with the gatekeeper. The effect of a runtime change is only seen after STOP/START is 
applied once, at START. 
manualDiscovery 
This parameter is relevant for an endpoint that does not run the automatic gatekeeper discovery 
process. It provides a set of constant values that define the gatekeeper for that endpoint. The 
presence of manualDiscovery disables the automatic discovery mechanism. The elements included 
in the manualDiscovery sequence correspond to and provide all the parameters an endpoint uses 
during automatic gatekeeper discovery (such as transportAddress). 
• 
defaultGatekeeper — the gatekeeper with which you want the endpoint to register. You 
specify the defaultGatekeeper by its IP address and port. 
registrationInfo 
A sequence that includes all the parameters with which the endpoint registers with a gatekeeper. 
The effect of a runtime change is immediate. 
• 
terminalType — the type of endpoint that is registering. This value is defined according to the 
EndpointType type from the H.225.0 Recommendation. 
• 
terminalAlias — a list of alias addresses by which other terminals may identify this terminal. 
The addresses are defined according to the AliasAddress type from the H.225.0 Recommen-
dation. 
• 
gatekeeperIdentifier — a gatekeeper ID for identifying the gatekeeper with which the terminal 
wishes to register. This value is defined according to GatekeeperIdentifier type from H.225.0 
Recommendation.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
87 
• 
endpointVendor — an endpoint vendor ID to be used in registration. This value is defined 
according to the VendorIdentifier type from the H.225.0 Recommendation. 
• 
timeToLive — when this parameter is set, determines the number of seconds before the 
registration becomes invalid. 
rasMulticastAddress 
The well-known multicast address of the RAS Multicast IP group. The effect of a runtime change is 
only seen after STOP/START is applied once, at START. 
rasPort 
The number of the port that receives all RAS transactions directed to the endpoint. You set this 
parameter to 0 to let the operating system look for an available port. The effect of a runtime 
change is only seen after STOP/START is applied once, at START. 
compare15bitRasCrv 
Causes an endpoint to ignore the CRV MSBit (the flag bit) in RAS messages. Default is 16 bit. 
maxRetries 
The number of retransmission retries. Default: 3. The effect of a runtime change is immediate. 
maxMulticastTTL 
The number of multicast TTL. Default: 20. The effect of a runtime change is only seen after 
STOP/START is applied once, at START. 
overlappedSending 
When present, the endpoint supports Overlapped Sending. 
preGrantedArqUse 
• 
direct — if equal to direct, the pre-granted ARQ feature is used for both direct and routed calls. 
• 
routed — if equal to routed, the pre-granted ARQ feature is used only for routed calls. If 
absent, the pre-granted ARQ is not used. The effect of a runtime change is seen at the next 
call.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
88 
11: Configure dialing plans 
CCSP allows for the installation of agents and VoIP Connection Servers (VCSs) with a high degree of 
geographic flexibility. Since agents and VCSs can be located anywhere around the world, it is 
necessary to choose VCSs for out-dial requests based upon the location of the dialed number. The 
dialing plan feature adds this capability to CCSP. It also allows for provisioning of calling privileges 
on a per tenant/group/agent basis. 
The VCS selection criteria and the tenant/agent/group privileges are customizable via ASP scripting. 
With the dialing plan feature turned on, each out-dial request from an agent is sent to the dialing 
plan web page. The web page determines if the agent is allowed to make the call and creates a list 
of VCSs in order of preference to be used for the out-dial. If the tenant, agent or group is blocked 
from making the call or no VCSs are found, the agent receives a r;Call rejected message. 
If more than one VCS is returned, the agent software will try to make the call using the first VCS in 
the list. If it fails for any reason, it will try each subsequent VCS in the list. If all VCSs in the list fail, 
the agent will receive a No outbound lines message. 
Dialing plans are also referred to as r;intelligent outdialing. 
Note 
• 
The maximum outgoing call number or SIP URI is 370 characters. 
• 
Each CCSP UI must be minimally configured with the correct dialing location for any dialing 
plan to work. For details, see the CCSP UI Help. 
Configure the VCS 
You must specify the location information for all VCSs that are configured in your contact center. 
To configure each VCS: 
1. 
In the Control Panel, click Phone and Modem. 
2. 
On the Dialing Rules tab, click New. The New Location dialog box appears. 
3. 
In Location name, type the name. 
4. 
In the Country/region list, click the country or region from which the dialing location origi-
nates. 
5. 
In Area code (or city code), type the new area code. 
6. 
Click OK. The Phone and Modem dialog box appears. 
7. 
Click the name of the new location and click OK. 
 
Note 
To exclude a VCS from the dialing plan, in CCSP Admin, delete both the country code and the 
area code from the VCS properties.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
89 
Enable agent relative number translations 
To translate all numbers to their shortest form relative to the agent before further processing by 
the dialing plan, enable agent relative number translations. 
To enable agent relative number translations: 
1. 
On the IIS server, navigate to /DialingPlan/ and open CheckPlan.asp in a text editor. 
2. 
Set var enableAgentRelativeNumberTranslations to true. 
3. 
Restart the IIS. 
Enable routing code remapping 
Some gateway providers require special codes to be sent through the gateway preceding a normal 
dialable number to apply a certain behavior. For example, a gateway provider may require that you 
prefix numbers with *67 so that your phone number is withheld and the called party cannot see it.  
However an asterisk (*) is not a standard dialable digit for E.164 numbers as it is not present on 
some phones. This code always has a translated form that is made up from the normal dialable 
digits 0-9; such that the code *67 may be equivalent to 1167.  
You enable remapping of the routing code and optionally configure the remapping in 
CheckPlan.asp.  
The routing modes are as follows. 
Code 
Meaning 
0 
Disabled — the routing code has already been remapped or there is no remapping 
configured. 
1 
Standard — removes the routing code from the dialled number before submitting the 
number for standard checkplan processing. Finally the remapped code is prepended to 
the front of the translated number. 
2 
Preprocess — remaps the routing code in the dialled number field before any other 
checkplan processing. This mode remaps the code before any national or international 
dialling codes are added or removed. 
3 
Smart — removes the routing code as in Standard mode, but instead of replacing it at 
the front of the translated number, it injects the number after any added country code.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
90 
To enable routing code remapping: 
1. 
On the IIS server, navigate to /DialingPlan/ and open CheckPlan.asp in a text editor. 
2. 
Set var enableRoutingCodeRemapping to true. 
3. 
If required, configure the values in var routingCodeRemappingTable. The default values are: 
[ 
{ match: /\*67(\d+)/, code: "1167", remappingMode: 3 } //translates 
numbers of the form *67xyz to 1167xyz 
, { match: /\*68(\d+)/, code: "1268", remappingMode: 3 } //translates 
numbers of the form *68xyz to 1268xyz 
, { match: /00(\d+)/, code: "+", remappingMode: 2 }      //translates 
numbers of the form 00xyz to +xyz 
]; 
4. 
Restart the IIS. 
Test the dialing plan 
You can test the dialing plan independently of the agent by using the test.asp page included in the 
installation. 
To test the dialing plan: 
1. 
Use a browser to load the test.asp page in the dialing plan virtual directory on the web server, 
for example,  http://universe.cosmocall.cosmocom.com/DialingPlan/Test.asp 
2. 
Enter the information: 
o 
Tenant Name — select from the list. 
o 
Agent's Country Code — type a valid country code. 
o 
Agent's City Code — type a valid city code. 
o 
Phone Number — type a phone number. The number should not contain any format 
characters, such as parentheses, dashes, commas, or spaces. It must also  be in a valid 
format for the country and city that you are dialing from, for example, 0016319404200 
3. 
The result appears as an XML document. Confirm the following: 
o 
The &lt;DialResponse Allow="TRUE"&gt; line specifies whether the out-dial request was 
accepted or rejected. If Allow="FALSE" then no other lines appear. 
o 
The following lines specify the CSs that were chosen to do the out-dial: 
&lt;ConnectionServer Type="VCS" Server="VCS1" ID="10" TranslatedNumber="99404200" 
OrigNumber="9404200" /&gt; 
o 
The lines are listed in order of preference. The ID field is the connection server ID of the 
VCS. The TranslatedNumber field is the translated phone number. It has been translated 
from the agent's location perspective to the VCS’s location perspective. It has also been 
prepended with the VCSs access codes, if any exist. The OrigNumber field is the original 
number that was dialed by the agent.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
91 
In the following example, the agent is in the United Kingdom and is dialing a phone number in 
Melville, New York. One VCS is also located in Melville, New York and the other is located in the 
United Kingdom, so the phone number for the first VCS has been translated from an international 
call to a local call. 
&lt;?xml version="1.0" ?&gt; = 
&lt;DialResponse Allow="TRUE"&gt; 
&lt;ConnectionServer Type="VCS" Server="VCS1" ID="10" TranslatedNumber="99404200" 
OrigNumber="9404200" /&gt; 
&lt;ConnectionServer Type="VCS" Server="VCS2" ID="11" 
TranslatedNumber="900163199404200" OrigNumber="9404200" /&gt; 
&lt;/DialResponse&gt; 
Customize dialing plans 
Information about agent/group dialing privileges is stored in the configuration database. This 
information can be accessed through the CCSP Config Com object. 
Only the system administrator can customize the agent privileges determination and the VCS 
selection process. 
There are two ASP (VBScript) functions in the C:\Program Files (x86)\CosmoCom\Server 
Components\Dialing Plan\DialingPlan.inc file, CheckPrivileges() and CreateCSList(), which can be 
modified or rewritten. 
The only restrictions are that the file name, and the functions' input parameters and output types 
must remain the same. 
By default the CheckPrivileges() function uses the DP_Privileges database table in the configuration 
database to determine if the agent or group is allowed to make the specified call. 
By default the CreateCSList() function will do a simple Least Cost Routing determination based on 
the dialed number and each VCS's location. It will first try to find a VCS with the same country code 
and city code as the dialed number. Then it will try to find any VCS with the same country code. 
Finally, it will take any remaining VCSs. 
CheckPrivileges input parameters 
The CheckPrivileges input parameters are: 
• 
CallType — type of call request. Its value will be one of INTL_CALL, LD_CALL, LOCAL_CALL, or 
OTHER_CALL. 
• 
AgentId — the agent’s ID. 
• 
GroupId — the agent’s group ID. 
• 
TenantId — the agent’s tenant ID. 
• 
CityCode — the city code portion of the dialed number. 
• 
LocalNum — the local number portion of the dialed number.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
92 
• 
Output: ReturnValue — this function should return TRUE if the agent is allowed to make the 
requested out-dial, otherwise return FALSE. 
CreateCSList input parameters 
The CreateCSList input parameters are: 
• 
CallType — type of call request. Its value will be one of INTL_CALL, LD_CALL, LOCAL_CALL, or 
OTHER_CALL. 
• 
TenantId — the agent’s tenant ID. 
• 
CntryCode — the country code of the dialed number. 
• 
CityCode — the city code of the dialed number. 
• 
LocalNum — the local number portion of the dialed number. 
• 
TransferID — if this parameter is not an empty string (" "), then it indicates that the outdial 
request is a transfer. A transfer must only select the VCS from which the inbound call is 
originating. This ID will be that of the VCS’ ID from which the inbound call is coming. 
• 
Output: ReturnValue — this function should return a string that contains colon-delimited 
records. Each record will contain the VCS Server ID, the string "VCS" and the phone number to 
dial. The server ID being the VCS connection server ID, and the phone number being the 
translated phone number to be dialed by the VCS. 
The fields are separated by a semi-colon, ";", and the records are separated by a colon, ":", for 
example: 
2;VCS;99404200:1;VCS;916319404200:3;VCS;90016319404200 
To cause the call to be rejected if no VCSs meet the correct criteria, return an empty string, "".
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
93 
12: Configure SNMP traps 
Simple Network Management Protocol (SNMP) is the protocol governing network management 
and the monitoring of network devices and their functions. It is used to examine and change 
configuration parameters and counters of LAN- and WAN-connected devices. 
SNMP applications running on monitored equipment, use Management Information Bases (MIBs), 
which communicate with management stations. A MIB is a formal description of a set of network 
objects that can be managed using SNMP. The format of the MIB is defined as part of SNMP. 
The CCSP MIB is used in conjunction with third-party SNMP-compliant management applications. It 
specifies whether the CCSP connection servers, including the AIS, have started or been stopped for 
any reason. 
The SNMP protocol supports only the following functions, the first three of which can be managed, 
and the last of which is sent by the SNMP agent as an unsolicited message: 
• 
Get — a specified variable’s current value from an agent 
• 
GetNext — get the next variable’s value 
• 
Set — a variable 
• 
Trap — CCSP UI sends a message when a threshold is exceeded 
Implement traps 
You use third-party SNMP management applications to monitor traps from your servers. 
To implement traps: 
• 
The SNMP Service must be installed on the servers you want to monitor, for example, VCS, 
MCS, and ICS, and on the computers designated to receive trap messages. 
• 
The concurrent SNMP Trap service must be enabled or disabled, depending on your 
requirements. 
• 
The CosmoCom.mib file must be added to your third-party SNMP management application 
and then be compiled for use. The SNMP Trap service may need to be restarted, depending on 
the requirements of the third-party application you use. 
 
The trap agents are assigned what is called a community string (weak password), which is not 
encrypted when it is sent over the network. By default, both the read-access and the write-access 
community strings are public. The write-access community string may instead be private. If you 
have any concerns about security, you should change the default passwords.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
94 
The CosmoCom.mib file supports three traps: 
• 
ServiceStart 
• 
ServiceStop 
• 
Message 
 
These traps send a message to the computer that is running the SNMP management application 
when any CCSP server or service starts or stops. 
You must add the CosmoCom.mib file to your SNMP management application and then compile it 
for use. 
Configure traps 
To use SNMP, it must be installed and started on the servers you want to monitor. It must also be 
installed on the computer that will run the monitoring service. 
Note 
If you change existing SNMP settings, your changes take effect immediately. The SNMP 
Service does not need to be restarted for your settings to take effect. 
 
To verify that the SNMP Service and the SNMP Trap Service are installed: 
1. 
In Server Manager, on the Tools menu, click Services. 
2. 
Scroll through the list of services to see if SNMP Service and SNMP Trap appear. If not, install 
the SNMP Service. 
3. 
Confirm that: 
o 
SNMP Service is set to start automatically. 
o 
SNMP Trap is set to start manually. 
 
To add destinations for trap messages: 
1. 
In Server Manager, on the Tools menu, click Computer Management. 
2. 
In the navigation pane, expand Services and Applications, and click Services. 
3. 
In the details pane, click SNMP Service. 
4. 
On the Action menu, click Properties. 
5. 
On the Traps tab, under Community name, type the case-sensitive community name to which 
this computer will send trap messages. The default is public. 
6. 
Click Add to list. 
7. 
In Trap destinations, click Add. 
8. 
In Host name, IP or IPX address, type the IP address of the computer that runs the third-party 
SNMP management application or the script that is run when a message is received, and click 
Add. 
9. 
Repeat steps 5 through 8 until you have added all the communities and trap destinations you 
want.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
95 
13: Configure the ECS 
A CCSP system requires a single instance of the ECS server. This single instance provides 
synchronization of campaign-related data between the CCSP configuration database and EPC 
databases for all tenants running in Elsbeth dialer mode. 
One installation of the ECS server deploys two Windows services, by default named CCSP Elsbeth 
Config Sync CT and CCSP Elsbeth Config Sync SS. Each of these services performs a different part of 
the configuration synchronization task but they work as a pair and cannot complete the full 
synchronization process if both are not running properly.  
The CCSP Elsbeth Config Sync CT service performs change detection and processing using the SQL 
Server Change Tracking feature, which is enabled on target databases and tables. The service polls 
for changes in configurable intervals (default is 30 seconds). The detected changes are organized 
and stored in workset tables. 
The CCSP Elsbeth Confing Sync SS service performs the actual data synchronization between the 
databases. It retrieves the lists of changed data from the workset tables populated by the CCSP 
Elsbeth Config Sync CT service and synchronizes those changes between the databases using the 
administration/configuration APIs of CCSP (AdminServer) and Elsbeth (EPCServer). This change 
retrieval and synchronization is done in configurable intervals (default is 30 seconds).  
A system can have multiple ECS server instances, 1 per machine, but only one of those can be 
running at a given time. Other instances can be used for failover. 
Configure ECS services 
Note 
After any change in the configuration file, the file must be saved and both ECS services must be 
manually restarted for changes to take effect. 
 
You configure the single ECS server instance by editing the ECS.exe.config XML file located in the 
installation folder of the ECS services. Both of the ECS windows services in an installation use the 
same configuration file. 
The configuration file contains the following configuration keys of interest: 
• 
LogLevel — the level of logging done by both ECS services. The applicable values are the 
standard CCSP log level values. The default is 7 (Info). 
• 
AuthServerURL — the URL pointing to the CCSP AuthServer. 
• 
AdminServerURL — the URL pointing to the CCSP AdminServer. 
• 
SynchronizerServiceClientID — the client ID registration value assigned to the ECS server 
instance during the installation process, which is used together with 
SynchronizerServiceSecret as part of the service authentication mechanism. This value must 
not be modified manually.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
96 
• 
SynchronizerServiceSecret — the secret key assigned to the ECS server instance during the 
installation process, which is used together with SynchronizerServiceClientID as part of the 
service authentication mechanism. This value must not be modified manually. 
• 
CcspConfigurationDatabseConnectionString — the connection string to the CCSP 
configuration database. 
Restart ECS services 
When requested to start, the ECS services CT and SS only validate basic dependency requirements. 
If those are satisfied, the service is declared as successfully started and begins full initialization.  
There are two initialization failure modes exhibited by ECS services. 
The first one is where the services start and continue running but the synchronization for mapped 
and enabled tenants, that failed these initialization steps, is unavailable. In this case an error event 
log and system log entries are created that provide an initialization summary of which mapped 
enabled tenants passed initialization and which failed. These initialization steps include: 
For ECS SS service: 
• 
Check CCSP AdminServer availability 
• 
Check EPC Server availability 
• 
Check EPC Server version compatibility 
• 
Retrieve EPC DB parameters from EPC Server 
 
For ECS CT service: 
• 
Retrieve table resync requests from CCSP configuration DB 
• 
Check EPC Server availability 
• 
Check EPC Server version compatibility 
• 
Retrieve EPC DB parameters from EPC Server 
 
This behavior is to allow the ECS services to provide synchronization for those mapped enabled 
tenants for which initialization succeeded until the issues that caused initialization failures for the 
other mapped enabled tenants are resolved. After this is done for one or more mapped enabled 
tenants that failed the initialization, ECS services must be restarted. 
The second failure mode is one where the services generate a fault, write custom fault information 
into the system event log and regular logs, and exit (stop), qualifying for automatic service recovery 
per recovery configuration for that service instance. The initialization steps whose failure triggers 
this behavior are primarily: 
• 
ECS configuration file loading 
• 
Initial tenant mapping retrieval from CCSP configuration DB 
• 
Initial service authentication with CCSP Auth service and initial access token retrieval 
(applicable only to ECS Synchronizer service).
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
97 
After the services successfully complete the initialization and start operating: 
• 
An info event log entry is created which provides the initialization summary. 
• 
The services start by performing a full tenant synchronization, in case of initial tenant 
synchronization or expired database change tracking retention period, followed by 
subsequent delta synchronizations.  
• 
The services continue performing delta tenant synchronizations if change tracking information 
is available in the tenant's database and its retention period has not expired. 
Configure tenant mappings 
Note 
• 
As part of the installation or update process, the ECS installer automatically suspends all 
tenant mappings and automatically makes a pending re-synchronization request for all 
existing tenant mappings. 
• 
After modifying any tenant mapping, you must manually restart both ECS services to apply 
the changes. You can restart the services in any order. 
 
Tenant mapping is a key configuration process through which a link is established between a CCSP 
tenant (defined by its ID) and an EPC mandant/tenant (defined by its EPCServer instance).  
The ECS server provides synchronization functionality only for tenants for which mappings have 
been provided and activated. 
When a tenant is mapped for the first time or re-mapped (a sequence of unmap and map 
operations for a previously mapped tenant, issued via ECS.exe command line), a full re-
synchronization is explicitly requested for that tenant. Standard re-synchronization rules are 
applied for this re-synchronization request. 
The tenant mapping settings for ECS purposes are stored in the ecs.TenantMapping table of the 
CCSP configuration database while resynchonization requests are stored in 
ecs.ResyncTableRequests table of CCSP configuration database. 
The tenant mappings are controlled through the ECS service executable command line. To access 
it: 
1. 
Open a console window on the ECS server machine. Because ECS connects to the CCSP 
configuration database as part of the mapping process using the 
CcspConfigurationDatabseConnectionString value specified in the ECS.exe.config file, the 
console window must be opened under a user with sufficient credentials to allow such 
database operations if the connection string specifies integrated security options.  
2. 
Navigate to the ECS installation folder. 
3. 
Execute ECS.exe with the appropriate tenant mapping parameters. For full command-line 
documentation and examples, refer to the rest of this section.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
98 
Command line reference 
Note 
From Elsbeth 9.x,  the epc_password (-ep) parameter is deprecated. The EPC Server service password must be encrypted via EPC’s 
PowerContactTextEncrypter tool and then supplied to ECS via the new epc_encrypted_password (-eep) parameter. 
 
Command line options, both full-form and their aliases, must be prefixed with either a double hyphen (--), single hyphen (-), or forward 
slash (/). 
Values should be separated on the command line from the command line option using an equals sign (=) or colon (:). 
Configuration mode command line 
The configuration command set is initiated using configure, as described below. 
Command line option 
Alias 
Value 
Mandatory 
Description 
configure 
c 
n/a 
Y 
Put ECS in configuration mode. This mode must be 
specified to map, remap, or unmap a tenant mapping. 
change_tracking_interval 
cti 
Numeric 
N 
Optionally set the change tracking interval (in seconds) of 
the tenant mapping. Default value is 30. 
create_mapping 
map 
n/a 
Y1 
Tell ECS to create a new tenant mapping or edit an existing 
tenant mapping. 
delete_mapping 
unmap 
String 
Y1 
Tell ECS to delete an existing tenant mapping. 
ecs_CT_epc_user_password 
ectup 
String 
Y2, 7, 8 
Specify the plaintext password for the dedicated ECS CT 
service EPC user 
"SystemReservedApplicationUser_ECS_CT".  
Elsbeth 6.x: EPC Server will not be contacted. 
From Elsbeth 9.x: EPC Server will be contacted.8.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
99 
Command line option 
Alias 
Value 
Mandatory 
Description 
ecs_CT_epc_user_encrypted_password 
ectuep 
String 
Y2, 7, 8, 9 
From Elsbeth 9.x: Specify the encrypted password for the 
dedicated ECS CT service EPC user 
"SystemReservedApplicationUser_ECS_CT".  
EPC Server will not be contacted.8’ 9 
Note: Use either ecs_CT_epc_user_password or 
ecs_CT_epc_user_encrypted_password. 
ecs_SS_epc_user_password 
essup 
String 
Y2, 7, 8 
Specify the plaintext password for the dedicated ECS SS 
service EPC user 
"SystemReservedApplicationUser_ECS_SS".  
Elsbeth 6.x: EPC Server will not be contacted. 
From Elsbeth 9.x: EPC Server will be contacted.8. 
ecs_SS_epc_user_encrypted_password 
essuep 
String 
Y2, 7, 8, 9 
From Elsbeth 9.x: Specify the encrypted password for the 
dedicated ECS SS service EPC user 
"SystemReservedApplicationUser_ECS_SS".  
EPC Server will not be contacted.8’ 9 
Note: Use either ecs_SS_epc_user_password or 
ecs_SS_epc_user_encrypted_password 
epc_password 
ep 
String 
Y2 
Elsbeth 6.x: Specify the EPC Server services password that 
ECS should use for this tenant mapping.5 
From Elsbeth 9.x: This command is deprecated. 
epc_encrypted_password 
eep 
String 
Y 9 
From Elsbeth 9.x: Specify the EPC Server service encrypted 
password that ECS should use for this tenant mapping. 
EPC Server will not be contacted.8’ 9 
epc_server 
es 
String 
Y2,3 
Specify the EPC Server address that ECS should use for this 
tenant mapping.5
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
100 
Command line option 
Alias 
Value 
Mandatory 
Description 
epc_username 
eu 
String 
Y2 
Specify the EPC Server services username that ECS should 
use for this tenant mapping.5 
mandant_id 
mi 
String 
Y4 
Set the Elsbeth Third Party ID for this tenant mapping, 
stored in the dbo.tTenants table of CCSP configuration 
database. 
mapping_enabled 
 
true/false 
N 
Optionally set the enabled state of the tenant mapping. 
Default value is true. 
preserve_mapping_status 
pms 
true/false 
N 
When this flag is specified, the tenant mapping suspension 
status does not get automatically cleared (if set). If the 
switch is omitted, any configuration mode command clears 
the tenant mapping suspension status (if set). 
synchronization_interval 
si 
Numeric 
N 
Optionally set the synchronization interval of the tenant 
mapping. Default value is 30. 
tenant_id 
t 
Numeric 
Y3 
Specify the CCSP Tenant ID of the tenant mapping.  
Note: If updating an already mapped tenant, to apply the 
change, all the tenant’s agents that are using EPC Gadget 
at that moment must log in again. 
 
 
Notes 
1. Either create_mapping (map/remap) or delete_mapping (unmap) must be specified. Not both. 
2. The EPC details are only mandatory when creating a new mapping. When remapping they are only required if you are changing 
one of the values, and when unmapping they are not required at all. 
3. Either the tenant_id (t) or epc_server (es) must be specified to find the mapping you are editing or deleting. When creating a new 
mapping you need to specify both, when remapping or unmapping you can specify either. If both are specified, the tenant_id takes 
precedent
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
101 
4. The ECM mandant name value, stored in the dbo.tTenants table of the CCSP configuration database, is not required for proper 
functioning of the configuration synchronization functionality provided by ECS. However, it is mandatory for overall Elsbeth 
integration with CCSP because it is used in general dialer workflows to provide coupling between the CCSP system and Elsbeth 
dialer. 
5. The URL must point to the WCF API host address of the target EPC Server. This value is specified during the EPC Server installation 
process in the General Settings &gt; SOAP Service (BASEADDRESSSOAPSERVICE) parameter.  
o 
Elsbeth 6.x: It can be found after EPC Server installation in the the PowerContactServer.exe.config configuration file of the EPC 
Server instance in “configuration/system.serviceModel/services/service/host/baseAddresses” element group. For more information, 
refer to the EPC Installation Guide and CCSP Dialer Guide for Elsbeth. 
o 
From Elsbeth 9.x: It can be found after EPC Server installation in the “WcfApi” element group of the 
PowerContactServer.appsettings.json configuration file of the EPC Server instance. There must be no trailing forward slashed in 
the URL. For more information, refer to the EPC Installation Guide and CCSP Dialer Guide for Elsbeth.  
6. The EPC Server service user credentials are specified during EPC Server installation in the General Settings &gt; Service ID 
(SERVICESUSER) and General Settings &gt; Service PWD (SERVICESPASSWORD) parameters.  
o 
Elsbeth 6.x: They can be found after EPC Server installation in the PowerContactServer.exe.config configuration file of the EPC 
Server instance, in “configuration/applicationSettings/ Sarix.PowerContact.Properties.Settings/” element group in “setting” 
elements “ServicesUser” and “ServicesPassword”. 
o 
From Elsbeth 9.x: They can be found after EPC Server installation in the EPC database table PWC.SETTINGS_SERVICES as 
SERVICES_USER and SERVICES_PASSWORD field values respectively. For more information, refer to the Configuring section of the 
EPC Installation Guide. 
7. EPC has two system-reserved users: ECSCTApplicationUserEPCUserPassword and ECSSSApplicationUserEPCUserPassword. Both 
users are intended to be used for authentication purposes by the ECS ChangeTracker and ECS Synchronizer services. The 
passwords for these users are changeable from the EPC Admin tool but must be provided by ECS when authenticating. These 
passwords are stored in the ecs.TenantMapping table. The password for these new EPC users is initially the same default value as 
for EPC’s “admin” user, “powercontact”, but can be changed through EPC Admin. 
Existing tenant mappings in CCSP version 7.3 and 7.3.1 must be updated to enable these two passwords to be set for each tenant. 
8. From Elsbeth 9.x: Either the plaintext password variant or the encrypted password variant of the command can be used at the 
same time. If the plaintext version is used, EPC Server is contacted by ECS to perform the encryption but a valid EPC Server service 
password must be known to ECS: either by supplying it via the “-eep” parameter or through an existing tenant mapping entry for 
the specified tenant. If EPC Server cannot be contacted when specifying the password in plain text, the password assignment fails 
to consider either fixing the EPC Server issue immediately and trying again or using the variant of this command that accepts an 
encrypted password, so EPC Server does not get contacted.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
102 
9. EPC password encryption is performed by the PowerContactTextEncrypterUI (user interface) or PowerContactTextEncrypterCLI 
(command-line interface) tools provided as part of the EPC installation pack, in the TextEncrypter subfolder. For details, refer to the 
EPC Text Encrypter Guide. The same tool is used to generate all encrypted passwords for EPC (including the EPC Gadget, as 
configured via the Campaign gadget’s Service password parameter in CCSP UI Admin) and the same plaintext input always 
generates the same encrypted output. 
 
Mapping examples 
All command line options marked mandatory must be specified when creating a new mapping. 
For Elsbeth 6.x: 
ecs --configure --create_mapping --tenant_id:12 --epc_server:"http://alt1.pj16.loc:7931/services/" --
epc_username:myUser --epc_password:secret --ecs_SS_epc_user_password:powercontact --
ecs_CT_epc_user_password:powercontact --mandant_id:ElsbethTenant1 
As above, but using aliases: 
ecs -c -map -t:12 -es:"http://alt1.pj16.loc:7931/services/" -eu:myUser -ep:secret -essup:powercontact -
ectup:powercontact -mi:ElsbethTenant1 
As above, but using aliases and including some optional fields: 
ecs -c -map -t:12 -es:"http://alt1.pj16.loc:7931/services/" -eu:myUser -ep:secret -essup:powercontact -
ectup:powercontact -mi:ElsbethTenant1 -si:40 
 
For Elsbeth 9.x: 
ecs --configure --create_mapping --tenant_id:12 --epc_server:"http://alt1.pj16.loc:7931/services/" --
epc_username:myUser --epc_encrypted_password:9CA089A518D9235C0E010711C1EFB7C2  
--ecs_SS_epc_user_password:powercontact --ecs_CT_epc_user_password:powercontact --mandant_id:ElsbethTenant1 
As above, but using aliases: 
ecs -c -map -t:12 -es:"http://alt1.pj16.loc:7931/services/" -eu:myUser -
eep:9CA089A518D9235C0E010711C1EFB7C2 -essup:powercontact -ectup:powercontact -mi:ElsbethTenant1 
As above, but using aliases and including some optional fields: 
ecs -c -map -t:12 -es:"http://alt1.pj16.loc:7931/services/" -eu:myUser -
eep:9CA089A518D9235C0E010711C1EFB7C2 -essup:powercontact -ectup:powercontact -mi:ElsbethTenant1 -si:40
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
103 
As above, but using encrypted passwords for all password-related fields: 
ecs -c -map -t:12 -es:"http://alt1.pj16.loc:7931/services/" -eu:myUser -
eep:9CA089A518D9235C0E010711C1EFB7C2 -essuep:3822C690457F3A57D6A861B48D82E7B7 -
ectuep:3822C690457F3A57D6A861B48D82E7B7 -mi:ElsbethTenant1 -si:40 
Remapping (updating an existing mapping) examples 
Use the map command to remap or change mappings. Only the tenant_id or the epc_server must be specified because they are unique 
entries in the TenantMapping table,  so the mapping can be found. If both are specified, the tenant_id is considered the primary search 
value. If the tenant mapping is found, the corresponding epc_server is set to the new value. 
Edit the epc server address for the mapping for tenant id 12: 
ecs -c -map -t:12 -es:"http://alt1.pj16.loc:7931/services/" 
 
Edit the epc password for the mapping for epc server "http://alt1.pj16.loc:7931/services/": 
For Elsbeth 6.x: 
ecs -c -map -es:"http://alt1.pj16.loc:7931/services/" -ep:"don't tell anyone" 
For Elsbeth 9.x: 
ecs -c -map -es:"http://alt1.pj16.loc:7931/services/" -
eep:F5F971479BE91AA927231EF4EA1CE0983C8E9294A1BF021E717CDD536C0747CF 
 
Change the change tracking and synchronization intervals to 20 seconds both for tenant id 12: 
ecs -c –map -t:12 -cti:20 -si:20 
 
Disable the mapping for tenant id 12: 
ecs -c -map -t:12 -mapping_enabled:false 
 
Update a tenant mapping and automatically clear the suspension flag (if set):  
ecs --configure -map --tenant_id:4 -ectup:powercontact
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
104 
 
Update a tenant mapping and retain the suspension flag:  
ecs --configure -map --tenant_id:4 -ectup:powercontact –pms 
Unmapping examples 
Use the unmap command to remove existing mappings. Only the tenant_id or the epc_server must be specified so the mapping can be 
found. Do not specify both. 
 
Delete the mapping for tenant id 12: 
ecs --configure --delete_mapping --tenant_id:12 
 
Delete the mapping for epc server "http://alt1.pj16.loc:7931/services/": 
ecs -c -unmap -es:"http://alt1.pj16.loc:7931/services/"
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
105 
Administration mode command line 
The administration command set is initiated using administer, as described below. 
For command line options that are part of a set, only one of the options can be used at a time, or none if the option set is optional. 
Command line option 
Alias 
Value 
Mandatory 
Set name 
Description 
administer 
a 
n/a 
Y 
Mode 
Put ECS in 
administration mode. 
This mode must be 
specified to: 
• 
Suspend or resume 
tenants 
• 
Request full resync 
for tenants 
all_tenants 
n/a 
n/a 
Yes (1 of 
set) 
Common 
Apply the command to 
all tenants in 
ecs.TenantMapping 
table. 
clear 
n/a 
n/a 
Yes (1 of 
set) 
ResyncRequestControlOperation 
Clears the resync 
request for the selected 
tenant or tenants. 
enabled _tenants 
n/a 
n/a 
Yes (1 of 
set) 
Common 
Apply the command to 
all enabled tenants in 
ecs.TenantMappign 
table (IsEnabled flag set 
to true). 
resume 
n/a 
n/a 
Yes (1 of 
set) 
ExecutionControlOperation 
Clears the suspension 
status (resumes) for the 
selected tenant 
mapping or mappings.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
106 
Command line option 
Alias 
Value 
Mandatory 
Set name 
Description 
set 
n/a 
n/a 
Yes (1 of 
set) 
ResyncRequestControlOperation 
Sets the resync request 
for the selected tenant 
or tenants. 
suspend 
n/a 
n/a 
Yes (1 of 
set) 
ExecutionControlOperation 
Suspends the selected 
tenant mapping or 
mappings. 
tenant_execution_control 
texc 
n/a 
Yes (1 of 
set) 
CommandType 
enables 
ExecutionControlOperation set 
Use the tenant 
execution control 
command to control the 
tenant mapping status 
(between suspended or 
resumed). 
tenant_id 
n/a 
Tenant id from 
ecs.TenantMapping 
table 
Yes (1 of 
set) 
Common 
Apply the command to 
the specified tenant in 
ecs.TenantMapping 
table. 
tenant_resync_request_control 
trrc 
n/a 
Yes (1 of 
set) 
CommandType 
Enables 
ResyncRequestControlOperation 
set 
Use the tenant resync 
request control 
command to set or clear 
full resync requests. 
Suspend resume examples 
Suspend all tenants:  
ecs.exe --administer -texc --suspend --all_tenants 
Resume all tenants:  
ecs.exe --administer -texc --resume --all_tenants
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
107 
Suspend enabled tenants:  
ecs.exe --administer -texc --suspend --enabled_tenants 
Resume enabled tenants:  
ecs.exe --administer -texc --resume --enabled_tenants 
 
Suspend selected tenant:  
ecs.exe --administer -texc --suspend --tenant_id:4 
Resume selected tenant:  
ecs.exe --administer -texc --resume --tenant_id:4 
Request resync examples 
Set resync request for all tenants:  
ecs.exe --administer -trrc --set --all_tenants 
Clear resync request for all tenants:  
ecs.exe --administer -trrc --clear --all_tenants 
Set resync request for enabled tenants:  
ecs.exe --administer -trrc --set --enabled_tenants 
Clear resync request for enabled tenants:  
ecs.exe --administer -trrc --clear --enabled_tenants 
Set resync request for selected tenant:  
ecs.exe --administer -trrc --set --tenant_id:4 
Clear resync request for selected tenant:  
ecs.exe --administer -trrc --clear --tenant_id:4
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
108 
ECS upgrade process 
A specific version of ECS is designed to work only with a specific version of EPC Server. Each CCSP 
release is paired with a corresponding EPC Server release. 
When upgrading a CCSP system with Elsbeth integration and ECS: 
1. 
Perform the CCSP and Elsbeth upgrade in any order. 
2. 
Do one of the following: 
o 
If there are changes specific to the CCSP/EPC version being upgraded that require tenant 
mapping reconfiguration (for details, refer to the specific release note), reconfigure 
tenant mappings via the ecs.exe command line as follows: 
"ecs --configure -map [other mandatory parameters]") 
Note that if “-pms” flag is omitted the tenant mapping status is 
automatically set to “resumed“ 
o 
If there no tenant mapping changes required, just resume the tenant mappings via the 
ecs.exe command line as follows: 
"ecs.exe --administer -texc --resume [other mandatory parameters]"  
3. 
Restart ECS services.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
109 
14: Configure the TWS 
The Teams Web Service (TWS) is a self-hosted web application that runs as a windows service. You 
configure TWS by editing the appsettings.json file located in the installation folder of the TWS.  
Note 
After any change in the configuration file except SyslogLevel, you must restart the service for 
changes to take effect. 
 
The configuration file contains the following configuration keys of interest: 
• 
SyslogLevel — the level of logging done by TWS in SysLog. The applicable values are the 
standard CCSP log level values. The default is 7 (Info). This value can be changed without 
having to restart the application. 
• 
TraceLogLevel — the level of the Windows logging output that can be viewed using 
DebugView The default is 1 (Emergency). 
• 
https_port — the HTTPS port where the service is listening. 
• 
default_port — the HTTP port where the service is listening. 
• 
Certificate 
o 
Store — the name of the store from which to get the root certificate needed for HTTPS. 
The default is My. 
o 
StoreLocation — the location of the certificate store. The default is LocalMachine. 
o 
StoreSubject — the subject name of the certificate. The default is the FQDN of the local 
machine. 
• 
Token 
o 
OAuthSecretKey — the secret key of CCSP’s AuthServer or the secret key of the token 
issuer when using an issuer different from CCSP’s AuthServer. 
o 
Issuer — the token issuer when using an issuer different from CCSP’s AuthServer. 
o 
Audience — the intended recipient (token audience) when the token issuer is different 
from CCSP’s AuthServer. 
• 
Logging:LogLevel:Microsoft — the ASP.NET Core Logging level. Possible values are: 
Trace,  Debug, Information, Warning, Error, Critical and None. The default is Warning. 
• 
CORS-Allowed — comma separated URLs allowed by CORS validation. Only requests from 
these URLs are valid when accessing TWS. For example: 
http://aps1.pj16.loc,https://aps1.pj16.loc,http://ccsp1.pj16.loc,https://ccsp1.pj16.loc. 
• 
MaxUsersPerSubscription — the maximum number of Teams users per subscription. The 
Graph API limits this value to 650. The default is 650. 
• 
SubscriptionDuration — the duration of a subscription in minutes. The Graph API limits this 
value to 60. The TWS renews the subscriptions before they expire. The default is 60. 
• 
ConfigNotificationCheckIntervalSeconds — the interval in seconds to check for changes in 
the list of CCSP agents. The default is 600.  
• 
ConnectionStrings:CCSP_DB — the connection string to the CCSP configuration database.
    </p>
    <p>
     CCSP System Administrator Guide - 7.3 and 7.4 
110 
• 
PublicEndpoint — the endpoint to receive presence change notifications from the MS Teams 
Servers.  
• 
TenantsFilter — the filter to limit the CCSP tenants that TWS monitors. This filter is a comma 
separated list of tenant UPN suffixes, for example: “t1.loc, t2.loc”. By default, this property is 
empty, meaning that all configured tenants are monitored. 
• 
Proxy 
o 
ProxyAddress – the address of the proxy, for example:  
http://proxy.server:808 
o 
ProxyUser – the user to log in to the proxy  
o 
ProxyPassword – the password to log in to the proxy
    </p>
   </section>
  </article>
 </body>
</html>
